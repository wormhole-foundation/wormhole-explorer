import { mockRpcPool } from "../../mocks/mockRpcPool";
mockRpcPool();

import { WormchainJsonRPCBlockRepository } from "../../../src/infrastructure/repositories";
import { InstrumentedHttpProvider } from "../../../src/infrastructure/rpc/http/InstrumentedHttpProvider";
import { describe, it, expect } from "@jest/globals";
import axios from "axios";
import nock from "nock";

axios.defaults.adapter = "http"; // needed by nock
const rpc = "http://localhost";

let repo: WormchainJsonRPCBlockRepository;

describe("WormchainJsonRPCBlockRepository", () => {
  describe("getBlockHeight", () => {
    it("should be able to get block height", async () => {
      const expectedHeight = 9187752n;
      givenARepo();
      givenBlockHeightIs();

      const result = await repo.getBlockHeight();

      expect(result).toBe(expectedHeight);
    });
  });

  describe("getBlockLogs", () => {
    it("should not process the block because does not have transactions", async () => {
      givenARepo();
      givenBlockLogs([]);

      const result = await repo.getBlockLogs(3104, 8453618n, ["wasm", "send_packet"]);

      expect(result.transactions).toEqual([]);
      expect(result.blockHeight).toEqual(8453618n);
      expect(result.chainId).toEqual(3104);
    });

    it("should process the block because have one transaction", async () => {
      givenARepo();
      givenBlockLogs([
        "CrYICrMICiQvY29zbXdhc20ud2FzbS52MS5Nc2dFeGVjdXRlQ29udHJhY3QSiggKL3dvcm1ob2xlMTV6ZGFhbjhzN2x0MHgyd2p0d2tsdXowMHB0cGx1a3BqcnZuOGtoEkN3b3JtaG9sZTE0aGoydGF2cThmcGVzZHd4eGN1NDRydHkzaGg5MHZodWpydmNtc3RsNHpyM3R4bWZ2dzlzcnJnNDY1GpEHeyJzdWJtaXRfb2JzZXJ2YXRpb25zIjp7Im9ic2VydmF0aW9ucyI6Ilczc2lkSGhmYUdGemFDSTZJamRXVUM5b1FtazNZalJ4U0ZoQlIxZFNWSGxwUTBKeGVqRkVWVlJzZEVjM01GUnRXbFJQUWxsV2NGazlJaXdpZEdsdFpYTjBZVzF3SWpveE56RTFOelV4TXpjeExDSnViMjVqWlNJNk9ESXlOU3dpWlcxcGRIUmxjbDlqYUdGcGJpSTZNU3dpWlcxcGRIUmxjbDloWkdSeVpYTnpJam9pWldNM016Y3lPVGsxWkRWall6ZzNNekl6T1RkbVlqQmhaRE0xWXpBeE1qRmxNR1ZoWVRrd1pESTJaamd5T0dFMU16UmpZV0kxTkRNNU1XSXpZVFJtTlNJc0luTmxjWFZsYm1ObElqbzROekkyTURnc0ltTnZibk5wYzNSbGJtTjVYMnhsZG1Wc0lqb3pNaXdpY0dGNWJHOWhaQ0k2SWtGUlFVRkJRVUZCUVVGQlFVRkJRVUZCUVVGQlFVRkJRVUZCUVVGQlFVRkJRVUZCUVdoamJWaERWSGdyUVVGQlFVRkJRVUZCUVVGQlFVRkJRV3huYlRGUlQxaGxNMlJ6VldWeWRqVm5VM0psUW5KSWJVZDVkMEZCWjBGQlFVRkJRVUZCUVVGQlFVRkJRVWRYYnpoSWRscHhSbTFQUnpGMGMwTnZhakJrTlRJNFFqTmFNVUZCU1VGQlFVRkJRVUZCUVVGQlFVRkJRVUZCUVVGQlFVRkJRVUZCUVVGQlFVRkJRVUZCUVVGQlFVRkJRVUU5UFNKOVhRPT0iLCJndWFyZGlhbl9zZXRfaW5kZXgiOjQsInNpZ25hdHVyZSI6eyJpbmRleCI6MCwic2lnbmF0dXJlIjpbMTE4LDI0LDIyMiwxMDcsMjE0LDE4OCwxOTUsMTg1LDYwLDEyMywyMDcsMjA4LDk2LDc5LDE0NSwxNjksNjUsMjAyLDExMyw1MSw0NSw4MiwyOCw1MCwxMDIsMTYsMTcsMTQ2LDIyNSwxNjMsMjAyLDQxLDg3LDI1MCwyMTYsNjgsNTYsMjYsMTYwLDMxLDgwLDgyLDIyMCw3MCw2NCwxNjgsMjU0LDEwMCwzOCw5Nyw1OSwyMzUsMTg0LDEyNiwyMDgsMTYsMjIxLDcyLDEyNSw5Myw5OCwxOTcsMTUyLDE4MSwwXX19fRJaClIKRgofL2Nvc21vcy5jcnlwdG8uc2VjcDI1NmsxLlB1YktleRIjCiECTNU10MWVzKLoEbR3KVeQzNN0RcrBOuz+X/R+8hcjr00SBAoCCAEYhtcEEgQQgIl6GkC6wWnfEe2JArWPIpcypfQ+AhCamp6n+hga87jh07agcAJVuCXS3EgxAc0xdb1y+2TMuapNPwjVDyKctycFVtGn",
      ]);
      givenOneTransaction();

      const result = await repo.getBlockLogs(3104, 8453618n, ["wasm", "send_packet"]);

      expect(result).toEqual({
        transactions: [
          {
            attributes: [
              {
                key: "X2NvbnRyYWN0X2FkZHJlc3M=",
                value:
                  "d29ybWhvbGUxNGhqMnRhdnE4ZnBlc2R3eHhjdTQ0cnR5M2hoOTB2aHVqcnZjbXN0bDR6cjN0eG1mdnc5c3JyZzQ2NQ==",
                index: true,
              },
              { key: "YWN0aW9u", value: "c3VibWl0X29ic2VydmF0aW9ucw==", index: true },
              {
                key: "b3duZXI=",
                value: "d29ybWhvbGUxNXpkYWFuOHM3bHQweDJ3anR3a2x1ejAwcHRwbHVrcGpydm44a2g=",
                index: true,
              },
            ],
            height: "8419190",
            hash: "0xd2cd24b830a4841006ebdbf268be09d3e8bc0f9829aca017173de90d2540c3f2",
            tx: Buffer.from([
              10, 182, 8, 10, 179, 8, 10, 36, 47, 99, 111, 115, 109, 119, 97, 115, 109, 46, 119, 97,
              115, 109, 46, 118, 49, 46, 77, 115, 103, 69, 120, 101, 99, 117, 116, 101, 67, 111,
              110, 116, 114, 97, 99, 116, 18, 138, 8, 10, 47, 119, 111, 114, 109, 104, 111, 108,
              101, 49, 53, 122, 100, 97, 97, 110, 56, 115, 55, 108, 116, 48, 120, 50, 119, 106, 116,
              119, 107, 108, 117, 122, 48, 48, 112, 116, 112, 108, 117, 107, 112, 106, 114, 118,
              110, 56, 107, 104, 18, 67, 119, 111, 114, 109, 104, 111, 108, 101, 49, 52, 104, 106,
              50, 116, 97, 118, 113, 56, 102, 112, 101, 115, 100, 119, 120, 120, 99, 117, 52, 52,
              114, 116, 121, 51, 104, 104, 57, 48, 118, 104, 117, 106, 114, 118, 99, 109, 115, 116,
              108, 52, 122, 114, 51, 116, 120, 109, 102, 118, 119, 57, 115, 114, 114, 103, 52, 54,
              53, 26, 145, 7, 123, 34, 115, 117, 98, 109, 105, 116, 95, 111, 98, 115, 101, 114, 118,
              97, 116, 105, 111, 110, 115, 34, 58, 123, 34, 111, 98, 115, 101, 114, 118, 97, 116,
              105, 111, 110, 115, 34, 58, 34, 87, 51, 115, 105, 100, 72, 104, 102, 97, 71, 70, 122,
              97, 67, 73, 54, 73, 106, 100, 87, 85, 67, 57, 111, 81, 109, 107, 51, 89, 106, 82, 120,
              83, 70, 104, 66, 82, 49, 100, 83, 86, 72, 108, 112, 81, 48, 74, 120, 101, 106, 70, 69,
              86, 86, 82, 115, 100, 69, 99, 51, 77, 70, 82, 116, 87, 108, 82, 80, 81, 108, 108, 87,
              99, 70, 107, 57, 73, 105, 119, 105, 100, 71, 108, 116, 90, 88, 78, 48, 89, 87, 49,
              119, 73, 106, 111, 120, 78, 122, 69, 49, 78, 122, 85, 120, 77, 122, 99, 120, 76, 67,
              74, 117, 98, 50, 53, 106, 90, 83, 73, 54, 79, 68, 73, 121, 78, 83, 119, 105, 90, 87,
              49, 112, 100, 72, 82, 108, 99, 108, 57, 106, 97, 71, 70, 112, 98, 105, 73, 54, 77, 83,
              119, 105, 90, 87, 49, 112, 100, 72, 82, 108, 99, 108, 57, 104, 90, 71, 82, 121, 90,
              88, 78, 122, 73, 106, 111, 105, 90, 87, 77, 51, 77, 122, 99, 121, 79, 84, 107, 49, 90,
              68, 86, 106, 89, 122, 103, 51, 77, 122, 73, 122, 79, 84, 100, 109, 89, 106, 66, 104,
              90, 68, 77, 49, 89, 122, 65, 120, 77, 106, 70, 108, 77, 71, 86, 104, 89, 84, 107, 119,
              90, 68, 73, 50, 90, 106, 103, 121, 79, 71, 69, 49, 77, 122, 82, 106, 89, 87, 73, 49,
              78, 68, 77, 53, 77, 87, 73, 122, 89, 84, 82, 109, 78, 83, 73, 115, 73, 110, 78, 108,
              99, 88, 86, 108, 98, 109, 78, 108, 73, 106, 111, 52, 78, 122, 73, 50, 77, 68, 103,
              115, 73, 109, 78, 118, 98, 110, 78, 112, 99, 51, 82, 108, 98, 109, 78, 53, 88, 50,
              120, 108, 100, 109, 86, 115, 73, 106, 111, 122, 77, 105, 119, 105, 99, 71, 70, 53, 98,
              71, 57, 104, 90, 67, 73, 54, 73, 107, 70, 82, 81, 85, 70, 66, 81, 85, 70, 66, 81, 85,
              70, 66, 81, 85, 70, 66, 81, 85, 70, 66, 81, 85, 70, 66, 81, 85, 70, 66, 81, 85, 70,
              66, 81, 85, 70, 66, 81, 85, 70, 66, 81, 85, 70, 66, 81, 87, 104, 106, 98, 86, 104, 68,
              86, 72, 103, 114, 81, 85, 70, 66, 81, 85, 70, 66, 81, 85, 70, 66, 81, 85, 70, 66, 81,
              85, 70, 66, 81, 87, 120, 110, 98, 84, 70, 82, 84, 49, 104, 108, 77, 50, 82, 122, 86,
              87, 86, 121, 100, 106, 86, 110, 85, 51, 74, 108, 81, 110, 74, 73, 98, 85, 100, 53,
              100, 48, 70, 66, 90, 48, 70, 66, 81, 85, 70, 66, 81, 85, 70, 66, 81, 85, 70, 66, 81,
              85, 70, 66, 81, 85, 100, 88, 98, 122, 104, 73, 100, 108, 112, 120, 82, 109, 49, 80,
              82, 122, 70, 48, 99, 48, 78, 118, 97, 106, 66, 107, 78, 84, 73, 52, 81, 106, 78, 97,
              77, 85, 70, 66, 83, 85, 70, 66, 81, 85, 70, 66, 81, 85, 70, 66, 81, 85, 70, 66, 81,
              85, 70, 66, 81, 85, 70, 66, 81, 85, 70, 66, 81, 85, 70, 66, 81, 85, 70, 66, 81, 85,
              70, 66, 81, 85, 70, 66, 81, 85, 70, 66, 81, 85, 70, 66, 81, 85, 70, 66, 81, 85, 69,
              57, 80, 83, 74, 57, 88, 81, 61, 61, 34, 44, 34, 103, 117, 97, 114, 100, 105, 97, 110,
              95, 115, 101, 116, 95, 105, 110, 100, 101, 120, 34, 58, 52, 44, 34, 115, 105, 103,
              110, 97, 116, 117, 114, 101, 34, 58, 123, 34, 105, 110, 100, 101, 120, 34, 58, 48, 44,
              34, 115, 105, 103, 110, 97, 116, 117, 114, 101, 34, 58, 91, 49, 49, 56, 44, 50, 52,
              44, 50, 50, 50, 44, 49, 48, 55, 44, 50, 49, 52, 44, 49, 56, 56, 44, 49, 57, 53, 44,
              49, 56, 53, 44, 54, 48, 44, 49, 50, 51, 44, 50, 48, 55, 44, 50, 48, 56, 44, 57, 54,
              44, 55, 57, 44, 49, 52, 53, 44, 49, 54, 57, 44, 54, 53, 44, 50, 48, 50, 44, 49, 49,
              51, 44, 53, 49, 44, 52, 53, 44, 56, 50, 44, 50, 56, 44, 53, 48, 44, 49, 48, 50, 44,
              49, 54, 44, 49, 55, 44, 49, 52, 54, 44, 50, 50, 53, 44, 49, 54, 51, 44, 50, 48, 50,
              44, 52, 49, 44, 56, 55, 44, 50, 53, 48, 44, 50, 49, 54, 44, 54, 56, 44, 53, 54, 44,
              50, 54, 44, 49, 54, 48, 44, 51, 49, 44, 56, 48, 44, 56, 50, 44, 50, 50, 48, 44, 55,
              48, 44, 54, 52, 44, 49, 54, 56, 44, 50, 53, 52, 44, 49, 48, 48, 44, 51, 56, 44, 57,
              55, 44, 53, 57, 44, 50, 51, 53, 44, 49, 56, 52, 44, 49, 50, 54, 44, 50, 48, 56, 44,
              49, 54, 44, 50, 50, 49, 44, 55, 50, 44, 49, 50, 53, 44, 57, 51, 44, 57, 56, 44, 49,
              57, 55, 44, 49, 53, 50, 44, 49, 56, 49, 44, 48, 93, 125, 125, 125, 18, 90, 10, 82, 10,
              70, 10, 31, 47, 99, 111, 115, 109, 111, 115, 46, 99, 114, 121, 112, 116, 111, 46, 115,
              101, 99, 112, 50, 53, 54, 107, 49, 46, 80, 117, 98, 75, 101, 121, 18, 35, 10, 33, 2,
              76, 213, 53, 208, 197, 149, 204, 162, 232, 17, 180, 119, 41, 87, 144, 204, 211, 116,
              69, 202, 193, 58, 236, 254, 95, 244, 126, 242, 23, 35, 175, 77, 18, 4, 10, 2, 8, 1,
              24, 134, 215, 4, 18, 4, 16, 128, 137, 122, 26, 64, 186, 193, 105, 223, 17, 237, 137,
              2, 181, 143, 34, 151, 50, 165, 244, 62, 2, 16, 154, 154, 158, 167, 250, 24, 26, 243,
              184, 225, 211, 182, 160, 112, 2, 85, 184, 37, 210, 220, 72, 49, 1, 205, 49, 117, 189,
              114, 251, 100, 204, 185, 170, 77, 63, 8, 213, 15, 34, 156, 183, 39, 5, 86, 209, 167,
            ]),
          },
        ],
        blockHeight: 8453618n,
        timestamp: 1712265433087,
        chainId: 3104,
      });
    });

    it("should process the block because have more than one transaction", async () => {
      givenARepo();
      givenBlockLogs([
        "CrYICrMICiQvY29zbXdhc20ud2FzbS52MS5Nc2dFeGVjdXRlQ29udHJhY3QSiggKL3dvcm1ob2xlMXJtZXJteDZ0ZDZwcHI3eDIzeThtYTc1NjRuYXV6d203bnVrOWUwEkN3b3JtaG9sZTE0aGoydGF2cThmcGVzZHd4eGN1NDRydHkzaGg5MHZodWpydmNtc3RsNHpyM3R4bWZ2dzlzcnJnNDY1GpEHeyJzdWJtaXRfb2JzZXJ2YXRpb25zIjp7Im9ic2VydmF0aW9ucyI6Ilczc2lkSGhmYUdGemFDSTZJa1o1WW5wbGRHNTVhVTVRZGpZNVJucEtUR05sTUVoV2JGUlVSV0pTWm5Wa1ZUaDJZVWd6UlRaS04yczlJaXdpZEdsdFpYTjBZVzF3SWpveE56RTFOelV4TlRNMExDSnViMjVqWlNJNk5UWTRORFl4TVRNekxDSmxiV2wwZEdWeVgyTm9ZV2x1SWpvMExDSmxiV2wwZEdWeVgyRmtaSEpsYzNNaU9pSXdNREF3TURBd01EQXdNREF3TURBd01EQXdNREF3TURCaU5tWTJaRGcyWVRobU9UZzNPV0U1WXpnM1pqWTBNemMyT0dRNVpXWmpNemhqTVdSaE5tVTNJaXdpYzJWeGRXVnVZMlVpT2pVMU1ETXpNaXdpWTI5dWMybHpkR1Z1WTNsZmJHVjJaV3dpT2pFMUxDSndZWGxzYjJGa0lqb2lRVkZCUVVGQlFVRkJRVUZCUVVGQlFVRkJRVUZCUVVGQlFVRkJRVUZCUVVGQlFVRkJRVUZUWmpaVVJtUkJRVUZCUVVGQlFVRkJRVUZCUVVGQlZqSTBjamRaT1RkU2RFNUJSbWh0U2tWak16VnBSemswZG5GalFVRm5RVUZCUVVGQlFVRkJRVUZCUVVGQlFYQnpZVlJLT1ZWWVZtODFha05RU0doNlV5OVRjM0pRVGxNdlFVSTBRVUZCUVVGQlFVRkJRVUZCUVVGQlFVRkJRVUZCUVVGQlFVRkJRVUZCUVVGQlFVRkJRVUZCUVVGQlFUMDlJbjFkIiwiZ3VhcmRpYW5fc2V0X2luZGV4Ijo0LCJzaWduYXR1cmUiOnsiaW5kZXgiOjExLCJzaWduYXR1cmUiOls2NywxNDcsMjU1LDIwMiwxMCwxMDUsMjcsOTksMTgwLDIxMywyMjYsNDksNTgsMjM4LDE0OSw0LDIyOSwxOTAsMjQ1LDk0LDY0LDE1LDE1NSwxNTAsOTMsMzUsMjA5LDIsMTA4LDc2LDU4LDksOTAsMTk2LDEwNiw0MSwyMDgsMjE1LDUzLDI0NSw0NSwxMzAsMTE2LDIzMiw4NSw1MCwxMDYsMTI2LDY4LDQ2LDI2LDI0MCwxNTksMTcyLDc4LDkwLDExNywxODksNzQsMjQ4LDk4LDY5LDE2Myw5MCwwXX19fRJbClMKRgofL2Nvc21vcy5jcnlwdG8uc2VjcDI1NmsxLlB1YktleRIjCiED4cB+1EZaSSVNcI6Eu+GodUFQF9R4TyGbo75somWCRFsSBAoCCAEY/f6CARIEEICJehpAqDB9zoCtoC/XmE4X8MpCKuG94rFaqGqU0biA+T8CCRNIgUz6FPoZG6TOEUnNvM+SiekOYDsyZRFg062ATQro/g==",
        "CrsICrgICiQvY29zbXdhc20ud2FzbS52MS5Nc2dFeGVjdXRlQ29udHJhY3QSjwgKL3dvcm1ob2xlMWZ3NGpjeWQwYXduNzcwMnJyeHdjeDl3NzRxZ3BtbGpja3l2ZGxxEkN3b3JtaG9sZTE0aGoydGF2cThmcGVzZHd4eGN1NDRydHkzaGg5MHZodWpydmNtc3RsNHpyM3R4bWZ2dzlzcnJnNDY1GpYHeyJzdWJtaXRfb2JzZXJ2YXRpb25zIjp7Im9ic2VydmF0aW9ucyI6Ilczc2lkSGhmYUdGemFDSTZJa1o1WW5wbGRHNTVhVTVRZGpZNVJucEtUR05sTUVoV2JGUlVSV0pTWm5Wa1ZUaDJZVWd6UlRaS04yczlJaXdpZEdsdFpYTjBZVzF3SWpveE56RTFOelV4TlRNMExDSnViMjVqWlNJNk5UWTRORFl4TVRNekxDSmxiV2wwZEdWeVgyTm9ZV2x1SWpvMExDSmxiV2wwZEdWeVgyRmtaSEpsYzNNaU9pSXdNREF3TURBd01EQXdNREF3TURBd01EQXdNREF3TURCaU5tWTJaRGcyWVRobU9UZzNPV0U1WXpnM1pqWTBNemMyT0dRNVpXWmpNemhqTVdSaE5tVTNJaXdpYzJWeGRXVnVZMlVpT2pVMU1ETXpNaXdpWTI5dWMybHpkR1Z1WTNsZmJHVjJaV3dpT2pFMUxDSndZWGxzYjJGa0lqb2lRVkZCUVVGQlFVRkJRVUZCUVVGQlFVRkJRVUZCUVVGQlFVRkJRVUZCUVVGQlFVRkJRVUZUWmpaVVJtUkJRVUZCUVVGQlFVRkJRVUZCUVVGQlZqSTBjamRaT1RkU2RFNUJSbWh0U2tWak16VnBSemswZG5GalFVRm5RVUZCUVVGQlFVRkJRVUZCUVVGQlFYQnpZVlJLT1ZWWVZtODFha05RU0doNlV5OVRjM0pRVGxNdlFVSTBRVUZCUVVGQlFVRkJRVUZCUVVGQlFVRkJRVUZCUVVGQlFVRkJRVUZCUVVGQlFVRkJRVUZCUVVGQlFUMDlJbjFkIiwiZ3VhcmRpYW5fc2V0X2luZGV4Ijo0LCJzaWduYXR1cmUiOnsiaW5kZXgiOjE2LCJzaWduYXR1cmUiOls1NCw5OCwxOTcsMTQyLDEyMSwxNTQsMTI4LDIsMTQ2LDExLDEzNSwxMDMsMTIxLDk1LDE4NSwxOTUsODcsMjAwLDExNCwyMjEsMjIsNCwyMzIsMTQsNCwyMTQsMTUyLDEyNiwxNjMsMjUyLDEyMCwxNzMsMTExLDI0Nyw5NiwyNyw1MSw1NCwxMyw3MSwyMjYsMTQyLDY5LDExLDc0LDc4LDM5LDIyNywzNyw3MSw1Miw2NiwyMjUsMjA4LDIxMSwxNzEsMjA1LDIyNyw0OSwxNzksMTM3LDE5MywxNjQsMTA4LDFdfX19EloKUgpGCh8vY29zbW9zLmNyeXB0by5zZWNwMjU2azEuUHViS2V5EiMKIQPnPs02nEn7crSxHqFZ7k3b8rPU0hWuOjTvlwrU/UIvwRIECgIIARi77XQSBBCAiXoaQK57xFZmOQFdmdkoHKhlYzyoEfBIaYrzqRUBIliUIRW+Nj9faFWJleYBl4WcLeEj5AB2b7iZZGoD2s7dA10aPlE=",
      ]);
      givenTwoTransaction();

      const result = await repo.getBlockLogs(3104, 8453618n, ["wasm", "send_packet"]);

      expect(result).toEqual({
        transactions: [
          {
            // First transaction aggrouping attributes by hash 0x54a03027f91ec0eb8af4c5754c69730ac180524bc8eccd5595b78845d36b06de
            attributes: [
              {
                key: "X2NvbnRyYWN0X2FkZHJlc3M=",
                value:
                  "d29ybWhvbGUxNGhqMnRhdnE4ZnBlc2R3eHhjdTQ0cnR5M2hoOTB2aHVqcnZjbXN0bDR6cjN0eG1mdnc5c3JyZzQ2NQ==",
                index: true,
              },
              { key: "YWN0aW9u", value: "c3VibWl0X29ic2VydmF0aW9ucw==", index: true },
              {
                key: "b3duZXI=",
                value: "d29ybWhvbGUxcm1lcm14NnRkNnBwcjd4MjN5OG1hNzU2NG5hdXp3bTdudWs5ZTA=",
                index: true,
              },
            ],
            height: "8419205",
            hash: "0x54a03027f91ec0eb8af4c5754c69730ac180524bc8eccd5595b78845d36b06de",
            tx: Buffer.from([
              10, 182, 8, 10, 179, 8, 10, 36, 47, 99, 111, 115, 109, 119, 97, 115, 109, 46, 119, 97,
              115, 109, 46, 118, 49, 46, 77, 115, 103, 69, 120, 101, 99, 117, 116, 101, 67, 111,
              110, 116, 114, 97, 99, 116, 18, 138, 8, 10, 47, 119, 111, 114, 109, 104, 111, 108,
              101, 49, 114, 109, 101, 114, 109, 120, 54, 116, 100, 54, 112, 112, 114, 55, 120, 50,
              51, 121, 56, 109, 97, 55, 53, 54, 52, 110, 97, 117, 122, 119, 109, 55, 110, 117, 107,
              57, 101, 48, 18, 67, 119, 111, 114, 109, 104, 111, 108, 101, 49, 52, 104, 106, 50,
              116, 97, 118, 113, 56, 102, 112, 101, 115, 100, 119, 120, 120, 99, 117, 52, 52, 114,
              116, 121, 51, 104, 104, 57, 48, 118, 104, 117, 106, 114, 118, 99, 109, 115, 116, 108,
              52, 122, 114, 51, 116, 120, 109, 102, 118, 119, 57, 115, 114, 114, 103, 52, 54, 53,
              26, 145, 7, 123, 34, 115, 117, 98, 109, 105, 116, 95, 111, 98, 115, 101, 114, 118, 97,
              116, 105, 111, 110, 115, 34, 58, 123, 34, 111, 98, 115, 101, 114, 118, 97, 116, 105,
              111, 110, 115, 34, 58, 34, 87, 51, 115, 105, 100, 72, 104, 102, 97, 71, 70, 122, 97,
              67, 73, 54, 73, 107, 90, 53, 89, 110, 112, 108, 100, 71, 53, 53, 97, 85, 53, 81, 100,
              106, 89, 53, 82, 110, 112, 75, 84, 71, 78, 108, 77, 69, 104, 87, 98, 70, 82, 85, 82,
              87, 74, 83, 90, 110, 86, 107, 86, 84, 104, 50, 89, 85, 103, 122, 82, 84, 90, 75, 78,
              50, 115, 57, 73, 105, 119, 105, 100, 71, 108, 116, 90, 88, 78, 48, 89, 87, 49, 119,
              73, 106, 111, 120, 78, 122, 69, 49, 78, 122, 85, 120, 78, 84, 77, 48, 76, 67, 74, 117,
              98, 50, 53, 106, 90, 83, 73, 54, 78, 84, 89, 52, 78, 68, 89, 120, 77, 84, 77, 122, 76,
              67, 74, 108, 98, 87, 108, 48, 100, 71, 86, 121, 88, 50, 78, 111, 89, 87, 108, 117, 73,
              106, 111, 48, 76, 67, 74, 108, 98, 87, 108, 48, 100, 71, 86, 121, 88, 50, 70, 107, 90,
              72, 74, 108, 99, 51, 77, 105, 79, 105, 73, 119, 77, 68, 65, 119, 77, 68, 65, 119, 77,
              68, 65, 119, 77, 68, 65, 119, 77, 68, 65, 119, 77, 68, 65, 119, 77, 68, 65, 119, 77,
              68, 66, 105, 78, 109, 89, 50, 90, 68, 103, 50, 89, 84, 104, 109, 79, 84, 103, 51, 79,
              87, 69, 53, 89, 122, 103, 51, 90, 106, 89, 48, 77, 122, 99, 50, 79, 71, 81, 53, 90,
              87, 90, 106, 77, 122, 104, 106, 77, 87, 82, 104, 78, 109, 85, 51, 73, 105, 119, 105,
              99, 50, 86, 120, 100, 87, 86, 117, 89, 50, 85, 105, 79, 106, 85, 49, 77, 68, 77, 122,
              77, 105, 119, 105, 89, 50, 57, 117, 99, 50, 108, 122, 100, 71, 86, 117, 89, 51, 108,
              102, 98, 71, 86, 50, 90, 87, 119, 105, 79, 106, 69, 49, 76, 67, 74, 119, 89, 88, 108,
              115, 98, 50, 70, 107, 73, 106, 111, 105, 81, 86, 70, 66, 81, 85, 70, 66, 81, 85, 70,
              66, 81, 85, 70, 66, 81, 85, 70, 66, 81, 85, 70, 66, 81, 85, 70, 66, 81, 85, 70, 66,
              81, 85, 70, 66, 81, 85, 70, 66, 81, 85, 70, 66, 81, 85, 70, 66, 81, 85, 70, 84, 90,
              106, 90, 85, 82, 109, 82, 66, 81, 85, 70, 66, 81, 85, 70, 66, 81, 85, 70, 66, 81, 85,
              70, 66, 81, 85, 70, 66, 86, 106, 73, 48, 99, 106, 100, 90, 79, 84, 100, 83, 100, 69,
              53, 66, 82, 109, 104, 116, 83, 107, 86, 106, 77, 122, 86, 112, 82, 122, 107, 48, 100,
              110, 70, 106, 81, 85, 70, 110, 81, 85, 70, 66, 81, 85, 70, 66, 81, 85, 70, 66, 81, 85,
              70, 66, 81, 85, 70, 66, 81, 88, 66, 122, 89, 86, 82, 75, 79, 86, 86, 89, 86, 109, 56,
              49, 97, 107, 78, 81, 83, 71, 104, 54, 85, 121, 57, 84, 99, 51, 74, 81, 84, 108, 77,
              118, 81, 85, 73, 48, 81, 85, 70, 66, 81, 85, 70, 66, 81, 85, 70, 66, 81, 85, 70, 66,
              81, 85, 70, 66, 81, 85, 70, 66, 81, 85, 70, 66, 81, 85, 70, 66, 81, 85, 70, 66, 81,
              85, 70, 66, 81, 85, 70, 66, 81, 85, 70, 66, 81, 85, 70, 66, 81, 85, 70, 66, 81, 84,
              48, 57, 73, 110, 49, 100, 34, 44, 34, 103, 117, 97, 114, 100, 105, 97, 110, 95, 115,
              101, 116, 95, 105, 110, 100, 101, 120, 34, 58, 52, 44, 34, 115, 105, 103, 110, 97,
              116, 117, 114, 101, 34, 58, 123, 34, 105, 110, 100, 101, 120, 34, 58, 49, 49, 44, 34,
              115, 105, 103, 110, 97, 116, 117, 114, 101, 34, 58, 91, 54, 55, 44, 49, 52, 55, 44,
              50, 53, 53, 44, 50, 48, 50, 44, 49, 48, 44, 49, 48, 53, 44, 50, 55, 44, 57, 57, 44,
              49, 56, 48, 44, 50, 49, 51, 44, 50, 50, 54, 44, 52, 57, 44, 53, 56, 44, 50, 51, 56,
              44, 49, 52, 57, 44, 52, 44, 50, 50, 57, 44, 49, 57, 48, 44, 50, 52, 53, 44, 57, 52,
              44, 54, 52, 44, 49, 53, 44, 49, 53, 53, 44, 49, 53, 48, 44, 57, 51, 44, 51, 53, 44,
              50, 48, 57, 44, 50, 44, 49, 48, 56, 44, 55, 54, 44, 53, 56, 44, 57, 44, 57, 48, 44,
              49, 57, 54, 44, 49, 48, 54, 44, 52, 49, 44, 50, 48, 56, 44, 50, 49, 53, 44, 53, 51,
              44, 50, 52, 53, 44, 52, 53, 44, 49, 51, 48, 44, 49, 49, 54, 44, 50, 51, 50, 44, 56,
              53, 44, 53, 48, 44, 49, 48, 54, 44, 49, 50, 54, 44, 54, 56, 44, 52, 54, 44, 50, 54,
              44, 50, 52, 48, 44, 49, 53, 57, 44, 49, 55, 50, 44, 55, 56, 44, 57, 48, 44, 49, 49,
              55, 44, 49, 56, 57, 44, 55, 52, 44, 50, 52, 56, 44, 57, 56, 44, 54, 57, 44, 49, 54,
              51, 44, 57, 48, 44, 48, 93, 125, 125, 125, 18, 91, 10, 83, 10, 70, 10, 31, 47, 99,
              111, 115, 109, 111, 115, 46, 99, 114, 121, 112, 116, 111, 46, 115, 101, 99, 112, 50,
              53, 54, 107, 49, 46, 80, 117, 98, 75, 101, 121, 18, 35, 10, 33, 3, 225, 192, 126, 212,
              70, 90, 73, 37, 77, 112, 142, 132, 187, 225, 168, 117, 65, 80, 23, 212, 120, 79, 33,
              155, 163, 190, 108, 162, 101, 130, 68, 91, 18, 4, 10, 2, 8, 1, 24, 253, 254, 130, 1,
              18, 4, 16, 128, 137, 122, 26, 64, 168, 48, 125, 206, 128, 173, 160, 47, 215, 152, 78,
              23, 240, 202, 66, 42, 225, 189, 226, 177, 90, 168, 106, 148, 209, 184, 128, 249, 63,
              2, 9, 19, 72, 129, 76, 250, 20, 250, 25, 27, 164, 206, 17, 73, 205, 188, 207, 146,
              137, 233, 14, 96, 59, 50, 101, 17, 96, 211, 173, 128, 77, 10, 232, 254,
            ]),
          },
          {
            // Second transaction aggrouping attributes by hash 0x726e20a616f114a227f2a815a7122c65418d082ad8544322f1f3eb3704158a71
            attributes: [
              {
                key: "X2NvbnRyYWN0X2FkZHJlc3M=",
                value:
                  "d29ybWhvbGUxNGhqMnRhdnE4ZnBlc2R3eHhjdTQ0cnR5M2hoOTB2aHVqcnZjbXN0bDR6cjN0eG1mdnc5c3JyZzQ2NQ==",
                index: true,
              },
              { key: "YWN0aW9u", value: "c3VibWl0X29ic2VydmF0aW9ucw==", index: true },
              {
                key: "b3duZXI=",
                value: "d29ybWhvbGUxZnc0amN5ZDBhd243NzAycnJ4d2N4OXc3NHFncG1samNreXZkbHE=",
                index: true,
              },
            ],
            height: "8419205",
            hash: "0x726e20a616f114a227f2a815a7122c65418d082ad8544322f1f3eb3704158a71",
            tx: Buffer.from([
              10, 187, 8, 10, 184, 8, 10, 36, 47, 99, 111, 115, 109, 119, 97, 115, 109, 46, 119, 97,
              115, 109, 46, 118, 49, 46, 77, 115, 103, 69, 120, 101, 99, 117, 116, 101, 67, 111,
              110, 116, 114, 97, 99, 116, 18, 143, 8, 10, 47, 119, 111, 114, 109, 104, 111, 108,
              101, 49, 102, 119, 52, 106, 99, 121, 100, 48, 97, 119, 110, 55, 55, 48, 50, 114, 114,
              120, 119, 99, 120, 57, 119, 55, 52, 113, 103, 112, 109, 108, 106, 99, 107, 121, 118,
              100, 108, 113, 18, 67, 119, 111, 114, 109, 104, 111, 108, 101, 49, 52, 104, 106, 50,
              116, 97, 118, 113, 56, 102, 112, 101, 115, 100, 119, 120, 120, 99, 117, 52, 52, 114,
              116, 121, 51, 104, 104, 57, 48, 118, 104, 117, 106, 114, 118, 99, 109, 115, 116, 108,
              52, 122, 114, 51, 116, 120, 109, 102, 118, 119, 57, 115, 114, 114, 103, 52, 54, 53,
              26, 150, 7, 123, 34, 115, 117, 98, 109, 105, 116, 95, 111, 98, 115, 101, 114, 118, 97,
              116, 105, 111, 110, 115, 34, 58, 123, 34, 111, 98, 115, 101, 114, 118, 97, 116, 105,
              111, 110, 115, 34, 58, 34, 87, 51, 115, 105, 100, 72, 104, 102, 97, 71, 70, 122, 97,
              67, 73, 54, 73, 107, 90, 53, 89, 110, 112, 108, 100, 71, 53, 53, 97, 85, 53, 81, 100,
              106, 89, 53, 82, 110, 112, 75, 84, 71, 78, 108, 77, 69, 104, 87, 98, 70, 82, 85, 82,
              87, 74, 83, 90, 110, 86, 107, 86, 84, 104, 50, 89, 85, 103, 122, 82, 84, 90, 75, 78,
              50, 115, 57, 73, 105, 119, 105, 100, 71, 108, 116, 90, 88, 78, 48, 89, 87, 49, 119,
              73, 106, 111, 120, 78, 122, 69, 49, 78, 122, 85, 120, 78, 84, 77, 48, 76, 67, 74, 117,
              98, 50, 53, 106, 90, 83, 73, 54, 78, 84, 89, 52, 78, 68, 89, 120, 77, 84, 77, 122, 76,
              67, 74, 108, 98, 87, 108, 48, 100, 71, 86, 121, 88, 50, 78, 111, 89, 87, 108, 117, 73,
              106, 111, 48, 76, 67, 74, 108, 98, 87, 108, 48, 100, 71, 86, 121, 88, 50, 70, 107, 90,
              72, 74, 108, 99, 51, 77, 105, 79, 105, 73, 119, 77, 68, 65, 119, 77, 68, 65, 119, 77,
              68, 65, 119, 77, 68, 65, 119, 77, 68, 65, 119, 77, 68, 65, 119, 77, 68, 65, 119, 77,
              68, 66, 105, 78, 109, 89, 50, 90, 68, 103, 50, 89, 84, 104, 109, 79, 84, 103, 51, 79,
              87, 69, 53, 89, 122, 103, 51, 90, 106, 89, 48, 77, 122, 99, 50, 79, 71, 81, 53, 90,
              87, 90, 106, 77, 122, 104, 106, 77, 87, 82, 104, 78, 109, 85, 51, 73, 105, 119, 105,
              99, 50, 86, 120, 100, 87, 86, 117, 89, 50, 85, 105, 79, 106, 85, 49, 77, 68, 77, 122,
              77, 105, 119, 105, 89, 50, 57, 117, 99, 50, 108, 122, 100, 71, 86, 117, 89, 51, 108,
              102, 98, 71, 86, 50, 90, 87, 119, 105, 79, 106, 69, 49, 76, 67, 74, 119, 89, 88, 108,
              115, 98, 50, 70, 107, 73, 106, 111, 105, 81, 86, 70, 66, 81, 85, 70, 66, 81, 85, 70,
              66, 81, 85, 70, 66, 81, 85, 70, 66, 81, 85, 70, 66, 81, 85, 70, 66, 81, 85, 70, 66,
              81, 85, 70, 66, 81, 85, 70, 66, 81, 85, 70, 66, 81, 85, 70, 66, 81, 85, 70, 84, 90,
              106, 90, 85, 82, 109, 82, 66, 81, 85, 70, 66, 81, 85, 70, 66, 81, 85, 70, 66, 81, 85,
              70, 66, 81, 85, 70, 66, 86, 106, 73, 48, 99, 106, 100, 90, 79, 84, 100, 83, 100, 69,
              53, 66, 82, 109, 104, 116, 83, 107, 86, 106, 77, 122, 86, 112, 82, 122, 107, 48, 100,
              110, 70, 106, 81, 85, 70, 110, 81, 85, 70, 66, 81, 85, 70, 66, 81, 85, 70, 66, 81, 85,
              70, 66, 81, 85, 70, 66, 81, 88, 66, 122, 89, 86, 82, 75, 79, 86, 86, 89, 86, 109, 56,
              49, 97, 107, 78, 81, 83, 71, 104, 54, 85, 121, 57, 84, 99, 51, 74, 81, 84, 108, 77,
              118, 81, 85, 73, 48, 81, 85, 70, 66, 81, 85, 70, 66, 81, 85, 70, 66, 81, 85, 70, 66,
              81, 85, 70, 66, 81, 85, 70, 66, 81, 85, 70, 66, 81, 85, 70, 66, 81, 85, 70, 66, 81,
              85, 70, 66, 81, 85, 70, 66, 81, 85, 70, 66, 81, 85, 70, 66, 81, 85, 70, 66, 81, 84,
              48, 57, 73, 110, 49, 100, 34, 44, 34, 103, 117, 97, 114, 100, 105, 97, 110, 95, 115,
              101, 116, 95, 105, 110, 100, 101, 120, 34, 58, 52, 44, 34, 115, 105, 103, 110, 97,
              116, 117, 114, 101, 34, 58, 123, 34, 105, 110, 100, 101, 120, 34, 58, 49, 54, 44, 34,
              115, 105, 103, 110, 97, 116, 117, 114, 101, 34, 58, 91, 53, 52, 44, 57, 56, 44, 49,
              57, 55, 44, 49, 52, 50, 44, 49, 50, 49, 44, 49, 53, 52, 44, 49, 50, 56, 44, 50, 44,
              49, 52, 54, 44, 49, 49, 44, 49, 51, 53, 44, 49, 48, 51, 44, 49, 50, 49, 44, 57, 53,
              44, 49, 56, 53, 44, 49, 57, 53, 44, 56, 55, 44, 50, 48, 48, 44, 49, 49, 52, 44, 50,
              50, 49, 44, 50, 50, 44, 52, 44, 50, 51, 50, 44, 49, 52, 44, 52, 44, 50, 49, 52, 44,
              49, 53, 50, 44, 49, 50, 54, 44, 49, 54, 51, 44, 50, 53, 50, 44, 49, 50, 48, 44, 49,
              55, 51, 44, 49, 49, 49, 44, 50, 52, 55, 44, 57, 54, 44, 50, 55, 44, 53, 49, 44, 53,
              52, 44, 49, 51, 44, 55, 49, 44, 50, 50, 54, 44, 49, 52, 50, 44, 54, 57, 44, 49, 49,
              44, 55, 52, 44, 55, 56, 44, 51, 57, 44, 50, 50, 55, 44, 51, 55, 44, 55, 49, 44, 53,
              50, 44, 54, 54, 44, 50, 50, 53, 44, 50, 48, 56, 44, 50, 49, 49, 44, 49, 55, 49, 44,
              50, 48, 53, 44, 50, 50, 55, 44, 52, 57, 44, 49, 55, 57, 44, 49, 51, 55, 44, 49, 57,
              51, 44, 49, 54, 52, 44, 49, 48, 56, 44, 49, 93, 125, 125, 125, 18, 90, 10, 82, 10, 70,
              10, 31, 47, 99, 111, 115, 109, 111, 115, 46, 99, 114, 121, 112, 116, 111, 46, 115,
              101, 99, 112, 50, 53, 54, 107, 49, 46, 80, 117, 98, 75, 101, 121, 18, 35, 10, 33, 3,
              231, 62, 205, 54, 156, 73, 251, 114, 180, 177, 30, 161, 89, 238, 77, 219, 242, 179,
              212, 210, 21, 174, 58, 52, 239, 151, 10, 212, 253, 66, 47, 193, 18, 4, 10, 2, 8, 1,
              24, 187, 237, 116, 18, 4, 16, 128, 137, 122, 26, 64, 174, 123, 196, 86, 102, 57, 1,
              93, 153, 217, 40, 28, 168, 101, 99, 60, 168, 17, 240, 72, 105, 138, 243, 169, 21, 1,
              34, 88, 148, 33, 21, 190, 54, 63, 95, 104, 85, 137, 149, 230, 1, 151, 133, 156, 45,
              225, 35, 228, 0, 118, 111, 184, 153, 100, 106, 3, 218, 206, 221, 3, 93, 26, 62, 81,
            ]),
          },
        ],
        blockHeight: 8453618n,
        timestamp: 1712265433087,
        chainId: 3104,
      });
    });
  });

  describe("getRedeems", () => {
    const osmosisRedeem = {
      blockTimestamp: 1715751595401,
      hash: "0xc1af5d0568aededfef571e6cf81a5a09ad35efb21637c25ebc992bdab8c5e8ef",
      coreContract: "wormhole1466nf3zuxpya8q9emxukd7vftaf6h4psr0a07srl5zw74zh84yjq4lyjmh",
      targetChain: 20,
      srcChannel: "channel-3",
      dstChannel: "channel-2186",
      timestamp: "1716961195401918187",
      tx: Buffer.from([
        10, 245, 13, 10, 242, 13, 10, 36, 47, 99, 111, 115, 109, 119, 97, 115, 109, 46, 119, 97,
        115, 109, 46, 118, 49, 46, 77, 115, 103, 69, 120, 101, 99, 117, 116, 101, 67, 111, 110, 116,
        114, 97, 99, 116, 18, 201, 13, 10, 47, 119, 111, 114, 109, 104, 111, 108, 101, 49, 97, 115,
        112, 122, 101, 120, 50, 109, 107, 57, 97, 99, 101, 107, 56, 51, 56, 52, 103, 117, 103, 55,
        110, 122, 99, 117, 53, 104, 54, 50, 121, 50, 115, 108, 108, 100, 52, 52, 18, 67, 119, 111,
        114, 109, 104, 111, 108, 101, 49, 52, 101, 106, 113, 106, 121, 113, 56, 117, 109, 52, 112,
        51, 120, 102, 113, 106, 55, 52, 121, 108, 100, 53, 119, 97, 113, 108, 106, 102, 56, 56, 102,
        122, 50, 53, 121, 120, 110, 109, 97, 48, 99, 110, 103, 115, 112, 120, 101, 51, 108, 101,
        115, 48, 48, 102, 112, 106, 120, 26, 208, 12, 123, 34, 99, 111, 109, 112, 108, 101, 116,
        101, 95, 116, 114, 97, 110, 115, 102, 101, 114, 95, 97, 110, 100, 95, 99, 111, 110, 118,
        101, 114, 116, 34, 58, 123, 34, 118, 97, 97, 34, 58, 34, 65, 81, 65, 65, 65, 65, 81, 78, 65,
        66, 108, 105, 100, 83, 54, 115, 117, 102, 56, 57, 71, 86, 98, 76, 115, 101, 105, 100, 109,
        51, 69, 78, 87, 82, 109, 114, 108, 75, 114, 83, 77, 55, 121, 47, 98, 85, 77, 57, 80, 65, 48,
        74, 102, 97, 55, 77, 83, 47, 117, 78, 74, 119, 104, 68, 54, 101, 119, 70, 57, 86, 68, 50,
        101, 43, 115, 81, 122, 73, 90, 75, 80, 73, 107, 100, 69, 114, 74, 106, 71, 72, 105, 65, 103,
        86, 103, 66, 65, 81, 85, 118, 50, 99, 74, 49, 105, 97, 56, 82, 67, 119, 66, 107, 102, 99,
        115, 105, 117, 120, 117, 83, 53, 74, 72, 78, 108, 101, 74, 56, 75, 90, 68, 67, 54, 71, 106,
        53, 121, 111, 78, 72, 73, 115, 112, 103, 106, 102, 54, 84, 88, 47, 84, 57, 113, 119, 82, 90,
        100, 103, 87, 110, 106, 43, 117, 52, 108, 100, 56, 77, 47, 65, 43, 57, 105, 99, 112, 67, 84,
        69, 103, 71, 73, 98, 115, 66, 65, 105, 54, 102, 65, 107, 54, 69, 67, 80, 101, 104, 77, 89,
        105, 70, 114, 103, 108, 68, 71, 71, 72, 52, 71, 68, 77, 50, 87, 115, 114, 78, 52, 106, 65,
        102, 117, 110, 85, 119, 116, 101, 98, 78, 86, 99, 108, 100, 77, 90, 122, 108, 120, 116, 49,
        99, 109, 115, 67, 86, 48, 66, 50, 81, 112, 97, 49, 78, 119, 82, 74, 117, 122, 110, 108, 77,
        80, 99, 68, 89, 52, 71, 83, 48, 43, 79, 77, 65, 66, 79, 122, 66, 84, 110, 122, 81, 97, 72,
        79, 72, 75, 50, 119, 97, 109, 43, 119, 114, 73, 104, 55, 119, 47, 74, 122, 82, 113, 104, 71,
        56, 107, 98, 90, 110, 90, 102, 86, 119, 116, 49, 79, 104, 66, 105, 86, 111, 74, 51, 48, 114,
        117, 116, 82, 89, 103, 120, 115, 113, 121, 110, 72, 99, 77, 81, 85, 52, 110, 49, 53, 108,
        68, 82, 88, 116, 55, 122, 52, 102, 116, 110, 68, 73, 99, 101, 85, 66, 66, 111, 71, 82, 102,
        102, 115, 57, 122, 80, 120, 57, 106, 115, 78, 108, 103, 111, 87, 116, 104, 110, 99, 74, 113,
        90, 47, 90, 116, 100, 49, 80, 105, 75, 104, 79, 49, 81, 66, 104, 84, 85, 120, 48, 97, 86,
        73, 55, 120, 109, 52, 118, 104, 121, 102, 80, 102, 122, 104, 47, 55, 87, 67, 89, 107, 53,
        77, 76, 89, 115, 122, 66, 49, 82, 118, 84, 118, 86, 97, 78, 76, 98, 79, 65, 103, 122, 81,
        65, 66, 47, 67, 52, 102, 119, 57, 49, 55, 106, 53, 50, 117, 68, 68, 81, 67, 106, 50, 113,
        88, 68, 103, 113, 115, 103, 56, 102, 107, 79, 87, 47, 73, 87, 43, 49, 47, 119, 47, 115, 112,
        116, 86, 106, 76, 117, 118, 68, 103, 101, 101, 107, 108, 75, 55, 52, 84, 48, 67, 74, 90, 52,
        107, 89, 113, 76, 68, 68, 98, 90, 111, 77, 86, 52, 73, 67, 120, 80, 101, 107, 118, 43, 51,
        78, 119, 82, 103, 65, 67, 68, 97, 85, 84, 105, 66, 74, 102, 67, 98, 88, 77, 72, 80, 108, 66,
        73, 52, 74, 118, 118, 70, 120, 116, 82, 80, 68, 74, 89, 69, 118, 118, 89, 108, 98, 108, 88,
        67, 115, 53, 121, 54, 79, 68, 104, 53, 103, 68, 117, 65, 119, 56, 106, 52, 78, 65, 84, 79,
        101, 109, 80, 82, 84, 80, 71, 119, 99, 81, 114, 72, 122, 76, 86, 112, 119, 101, 82, 100,
        113, 78, 43, 90, 69, 51, 70, 103, 66, 67, 88, 104, 71, 120, 53, 48, 53, 81, 65, 73, 99, 78,
        109, 82, 85, 76, 78, 117, 108, 77, 81, 65, 121, 78, 79, 120, 65, 70, 67, 47, 121, 84, 119,
        69, 99, 109, 51, 117, 72, 98, 106, 117, 50, 78, 103, 77, 111, 89, 48, 116, 49, 90, 110, 89,
        75, 110, 78, 103, 101, 76, 110, 48, 117, 73, 110, 84, 122, 97, 120, 114, 85, 87, 72, 80,
        121, 81, 78, 84, 121, 98, 88, 122, 79, 70, 72, 73, 65, 67, 110, 56, 107, 109, 110, 122, 50,
        48, 110, 106, 88, 50, 121, 115, 66, 75, 118, 102, 72, 70, 65, 121, 73, 87, 57, 70, 106, 109,
        106, 80, 48, 86, 69, 105, 67, 110, 52, 67, 86, 71, 54, 43, 80, 81, 112, 110, 120, 43, 69,
        68, 107, 72, 49, 74, 48, 122, 54, 75, 119, 116, 73, 43, 76, 118, 90, 84, 98, 106, 66, 88,
        67, 112, 90, 118, 87, 73, 122, 105, 55, 84, 85, 76, 97, 49, 83, 119, 66, 68, 120, 67, 77,
        99, 110, 88, 68, 53, 76, 83, 70, 71, 76, 75, 118, 73, 109, 89, 73, 67, 76, 120, 118, 108,
        104, 88, 74, 90, 88, 67, 71, 89, 109, 115, 112, 81, 57, 68, 98, 110, 89, 57, 88, 74, 48,
        114, 78, 119, 90, 108, 82, 112, 65, 122, 87, 57, 115, 72, 43, 111, 104, 119, 119, 70, 107,
        52, 83, 102, 121, 114, 78, 87, 118, 52, 87, 66, 57, 78, 122, 75, 87, 74, 103, 98, 48, 103,
        66, 69, 79, 55, 71, 110, 53, 51, 81, 70, 120, 114, 120, 120, 49, 97, 57, 101, 78, 90, 65,
        109, 90, 75, 99, 107, 88, 83, 82, 121, 66, 104, 104, 102, 83, 101, 76, 52, 83, 117, 122, 73,
        70, 47, 103, 87, 116, 55, 74, 80, 82, 73, 87, 55, 121, 104, 49, 110, 74, 115, 90, 57, 110,
        108, 112, 56, 48, 81, 78, 65, 118, 51, 87, 48, 55, 65, 49, 50, 119, 53, 119, 74, 118, 78,
        50, 71, 47, 65, 65, 69, 100, 89, 66, 55, 89, 121, 121, 112, 117, 119, 87, 119, 54, 68, 82,
        120, 108, 82, 81, 120, 49, 101, 98, 78, 74, 101, 55, 102, 118, 87, 85, 79, 48, 56, 114, 88,
        80, 81, 99, 105, 56, 106, 122, 77, 110, 74, 88, 111, 50, 86, 73, 68, 112, 88, 115, 111, 101,
        111, 112, 70, 81, 74, 90, 52, 105, 69, 103, 65, 90, 57, 57, 78, 83, 85, 85, 117, 115, 78,
        74, 67, 56, 67, 100, 79, 120, 99, 66, 69, 112, 75, 50, 97, 116, 69, 113, 88, 98, 72, 109,
        56, 53, 82, 117, 101, 98, 116, 76, 100, 73, 115, 78, 90, 110, 85, 53, 87, 70, 115, 120, 88,
        74, 77, 50, 70, 74, 100, 106, 120, 107, 88, 53, 67, 52, 86, 107, 106, 90, 86, 74, 48, 71,
        56, 71, 52, 120, 121, 122, 99, 79, 73, 106, 84, 118, 73, 99, 86, 76, 53, 70, 114, 50, 108,
        48, 69, 87, 52, 108, 55, 55, 90, 76, 66, 81, 85, 65, 90, 107, 82, 75, 108, 119, 65, 65, 83,
        67, 56, 65, 65, 101, 120, 122, 99, 112, 108, 100, 88, 77, 104, 122, 73, 53, 102, 55, 67,
        116, 78, 99, 65, 83, 72, 103, 54, 113, 107, 78, 74, 118, 103, 111, 112, 84, 84, 75, 116, 85,
        79, 82, 115, 54, 84, 49, 65, 65, 65, 65, 65, 65, 65, 78, 85, 75, 73, 103, 65, 119, 65, 65,
        65, 65, 65, 65, 65, 65, 65, 65, 65, 65, 65, 65, 65, 65, 65, 65, 65, 65, 65, 65, 65, 65, 65,
        65, 65, 65, 65, 65, 65, 65, 65, 65, 65, 65, 65, 97, 104, 86, 114, 48, 120, 118, 112, 54, 56,
        55, 55, 98, 114, 84, 111, 57, 90, 102, 78, 113, 113, 56, 108, 48, 77, 98, 71, 55, 53, 77,
        76, 83, 57, 117, 68, 107, 102, 75, 89, 67, 65, 48, 85, 118, 88, 87, 69, 65, 65, 97, 53, 107,
        67, 82, 65, 72, 53, 117, 111, 89, 109, 83, 67, 88, 113, 107, 43, 50, 106, 117, 103, 47, 74,
        74, 122, 112, 69, 113, 104, 68, 84, 51, 49, 43, 74, 111, 103, 69, 50, 89, 47, 122, 68, 67,
        65, 49, 72, 110, 79, 115, 98, 112, 79, 43, 102, 68, 107, 111, 110, 84, 49, 103, 108, 77,
        104, 78, 102, 43, 101, 76, 75, 82, 118, 99, 112, 56, 85, 115, 68, 53, 121, 74, 70, 43, 111,
        107, 67, 88, 115, 105, 90, 50, 70, 48, 90, 88, 100, 104, 101, 86, 57, 48, 99, 109, 70, 117,
        99, 50, 90, 108, 99, 105, 73, 54, 101, 121, 74, 106, 97, 71, 70, 112, 98, 105, 73, 54, 77,
        106, 65, 115, 73, 109, 53, 118, 98, 109, 78, 108, 73, 106, 111, 120, 77, 84, 107, 115, 73,
        110, 74, 108, 89, 50, 108, 119, 97, 87, 86, 117, 100, 67, 73, 54, 73, 109, 73, 122, 84, 110,
        82, 105, 101, 107, 85, 122, 90, 87, 53, 74, 77, 71, 74, 88, 85, 88, 100, 79, 82, 69, 112,
        118, 89, 109, 112, 87, 98, 48, 57, 69, 85, 109, 57, 79, 83, 71, 120, 113, 89, 48, 100, 122,
        78, 70, 112, 89, 82, 84, 82, 105, 87, 71, 81, 119, 84, 87, 53, 75, 98, 108, 112, 117, 81,
        84, 82, 105, 98, 108, 90, 117, 84, 108, 69, 57, 80, 83, 73, 115, 73, 109, 90, 108, 90, 83,
        73, 54, 73, 106, 65, 105, 102, 88, 48, 61, 34, 125, 125, 18, 90, 10, 82, 10, 70, 10, 31, 47,
        99, 111, 115, 109, 111, 115, 46, 99, 114, 121, 112, 116, 111, 46, 115, 101, 99, 112, 50, 53,
        54, 107, 49, 46, 80, 117, 98, 75, 101, 121, 18, 35, 10, 33, 3, 25, 241, 25, 245, 49, 243,
        117, 246, 33, 252, 8, 146, 218, 87, 166, 154, 213, 48, 242, 244, 102, 42, 198, 130, 184,
        107, 109, 117, 132, 173, 125, 132, 18, 4, 10, 2, 8, 1, 24, 232, 174, 3, 18, 4, 16, 128, 137,
        122, 26, 64, 22, 163, 137, 75, 209, 205, 2, 32, 110, 238, 98, 21, 207, 6, 171, 126, 63, 13,
        22, 172, 22, 31, 99, 118, 164, 253, 120, 195, 78, 195, 33, 126, 52, 222, 250, 20, 182, 59,
        24, 135, 133, 194, 185, 50, 45, 97, 90, 67, 235, 244, 71, 4, 111, 160, 36, 124, 53, 56, 235,
        114, 147, 251, 221, 240,
      ]),
      receiver: "wormhole14ejqjyq8um4p3xfqj74yld5waqljf88fz25yxnma0cngspxe3les00fpjx",
      sequence: 37109,
      sender: "osmo17zr4md042hn5h84h4ycpk8eq8mwt2rgfp8nug5",
    };

    it("should not be able to get redeems because do not find the cosmos client", async () => {
      const cosmosPools: Map<number, any> = new Map([
        [19, () => new InstrumentedHttpProvider({ url: rpc, chain: "injective" })],
        [4001, () => new InstrumentedHttpProvider({ url: rpc, chain: "evmos" })],
        [4002, () => new InstrumentedHttpProvider({ url: rpc, chain: "kujira" })],
      ]);

      givenARepo({ get: (chain: number) => cosmosPools.get(chain) } as any);
      givenBlockHeightIs();

      const result = await repo.getRedeems(osmosisRedeem);

      expect(result).toEqual([]);
    });
  });
});

const givenARepo = (cosmosPools: any = undefined) => {
  repo = new WormchainJsonRPCBlockRepository(
    { get: () => new InstrumentedHttpProvider({ url: rpc, chain: "wormchain" }) } as any,
    cosmosPools
  );
};

const givenBlockHeightIs = () => {
  nock(rpc)
    .post("/abci_info")
    .reply(200, {
      jsonrpc: "2.0",
      id: -1,
      result: {
        response: {
          data: "wormchain",
          version: "v0.0.1",
          last_block_height: "9187752",
          last_block_app_hash: "2tqdA7MAHuPiwU5zkYzCubmSBJMvq/6x3eMt5XqcdbQ=",
        },
      },
    });
};

const givenBlockLogs = (txs: string[] | null) => {
  nock(rpc)
    .post("/block?height=8453618")
    .reply(200, {
      jsonrpc: "2.0",
      id: -1,
      result: {
        block_id: {
          hash: "D5B406E49ECFACE590CBFF5C329F7259064A14727F1CFA55C6A987F83045AAD1",
          parts: {
            total: 1,
            hash: "F816FB7DDB053E0BCFCEE632D0C7755CEC8BD45E818CD36B91F467FC72FDECF5",
          },
        },
        block: {
          header: {
            version: { block: "11" },
            chain_id: "wormchain-testnet-0",
            height: "8453618",
            time: "2024-04-04T21:17:13.087731952Z",
            last_block_id: {
              hash: "F90BE2450E9F3DE27AABA2FEA36A526969B6B9B5655426B7C3AE8F9A8894B835",
              parts: {
                total: 1,
                hash: "4BE62D3A88F6F03A9496C517C3C6E8C888D7BBFCF0E21C7DB00FC6F3614581CC",
              },
            },
            last_commit_hash: "B18E49FB247B09D8ECBA7F4F1532DE94FA340E86CACB3CCD3A9107122C1163B5",
            data_hash: "E3B0C44298FC1C149AFBF4C8996FB92427AE41E4649B934CA495991B7852B855",
            validators_hash: "DE2BCE9F7568248A23FED152D40A3AFE020A35701B72269FB0FE5BFFD243E991",
            next_validators_hash:
              "DE2BCE9F7568248A23FED152D40A3AFE020A35701B72269FB0FE5BFFD243E991",
            consensus_hash: "048091BC7DDC283F77BFBF91D73C44DA58C3DF8A9CBC867405D8B7F3DAADA22F",
            app_hash: "59C3A2FD19A41277F31FF2606EF0E7A63234D13111B6C003CB8E5591DDDDEE4E",
            last_results_hash: "E3B0C44298FC1C149AFBF4C8996FB92427AE41E4649B934CA495991B7852B855",
            evidence_hash: "E3B0C44298FC1C149AFBF4C8996FB92427AE41E4649B934CA495991B7852B855",
            proposer_address: "811E4F635FFDC42585803FBB8BA0F9F49EF48F16",
          },
          data: { txs: txs },
          evidence: { evidence: [] },
          last_commit: {
            height: "8453617",
            round: 0,
            block_id: {
              hash: "F90BE2450E9F3DE27AABA2FEA36A526969B6B9B5655426B7C3AE8F9A8894B835",
              parts: {
                total: 1,
                hash: "4BE62D3A88F6F03A9496C517C3C6E8C888D7BBFCF0E21C7DB00FC6F3614581CC",
              },
            },
            signatures: [
              {
                block_id_flag: 2,
                validator_address: "811E4F635FFDC42585803FBB8BA0F9F49EF48F16",
                timestamp: "2024-04-04T21:17:13.087731952Z",
                signature:
                  "o/LK5srY/iQ9U0bStknXgjSLhJ2KinspvPkmg2nLV/Lk9/ttnKEvLBsOEiNAZ+YXd8L9gk5rkbe+pfylXHfMAQ==",
              },
            ],
          },
        },
      },
    });
};

const givenOneTransaction = () => {
  nock(rpc)
    .post("/tx?hash=0xD2CD24B830A4841006EBDBF268BE09D3E8BC0F9829ACA017173DE90D2540C3F2")
    .reply(200, {
      jsonrpc: "2.0",
      id: -1,
      result: {
        hash: "D2CD24B830A4841006EBDBF268BE09D3E8BC0F9829ACA017173DE90D2540C3F2",
        height: "8419190",
        index: 0,
        tx_result: {
          code: 0,
          data: "Cs4BCiQvY29zbXdhc20ud2FzbS52MS5Nc2dFeGVjdXRlQ29udHJhY3QSpQEKogFbeyJrZXkiOnsiZW1pdHRlcl9jaGFpbiI6MSwiZW1pdHRlcl9hZGRyZXNzIjoiZWM3MzcyOTk1ZDVjYzg3MzIzOTdmYjBhZDM1YzAxMjFlMGVhYTkwZDI2ZjgyOGE1MzRjYWI1NDM5MWIzYTRmNSIsInNlcXVlbmNlIjo4NzI2MDh9LCJzdGF0dXMiOnsidHlwZSI6ImNvbW1pdHRlZCJ9fV0=",
          log: '[{"events":[{"type":"execute","attributes":[{"key":"_contract_address","value":"wormhole14hj2tavq8fpesdwxxcu44rty3hh90vhujrvcmstl4zr3txmfvw9srrg465"}]},{"type":"message","attributes":[{"key":"action","value":"/cosmwasm.wasm.v1.MsgExecuteContract"},{"key":"module","value":"wasm"},{"key":"sender","value":"wormhole15zdaan8s7lt0x2wjtwkluz00ptplukpjrvn8kh"}]},{"type":"wasm","attributes":[{"key":"_contract_address","value":"wormhole14hj2tavq8fpesdwxxcu44rty3hh90vhujrvcmstl4zr3txmfvw9srrg465"},{"key":"action","value":"submit_observations"},{"key":"owner","value":"wormhole15zdaan8s7lt0x2wjtwkluz00ptplukpjrvn8kh"}]}]}]',
          info: "",
          gas_wanted: "2000000",
          gas_used: "136715",
          events: [
            {
              type: "tx",
              attributes: [
                { key: "ZmVl", value: null, index: true },
                {
                  key: "ZmVlX3BheWVy",
                  value: "d29ybWhvbGUxNXpkYWFuOHM3bHQweDJ3anR3a2x1ejAwcHRwbHVrcGpydm44a2g=",
                  index: true,
                },
              ],
            },
            {
              type: "tx",
              attributes: [
                {
                  key: "YWNjX3NlcQ==",
                  value: "d29ybWhvbGUxNXpkYWFuOHM3bHQweDJ3anR3a2x1ejAwcHRwbHVrcGpydm44a2gvNzY2Nzg=",
                  index: true,
                },
              ],
            },
            {
              type: "tx",
              attributes: [
                {
                  key: "c2lnbmF0dXJl",
                  value:
                    "dXNGcDN4SHRpUUsxanlLWE1xWDBQZ0lRbXBxZXAvb1lHdk80NGRPMm9IQUNWYmdsMHR4SU1RSE5NWFc5Y3Z0a3pMbXFUVDhJMVE4aW5MY25CVmJScHc9PQ==",
                  index: true,
                },
              ],
            },
            {
              type: "message",
              attributes: [
                {
                  key: "YWN0aW9u",
                  value: "L2Nvc213YXNtLndhc20udjEuTXNnRXhlY3V0ZUNvbnRyYWN0",
                  index: true,
                },
              ],
            },
            {
              type: "message",
              attributes: [
                { key: "bW9kdWxl", value: "d2FzbQ==", index: true },
                {
                  key: "c2VuZGVy",
                  value: "d29ybWhvbGUxNXpkYWFuOHM3bHQweDJ3anR3a2x1ejAwcHRwbHVrcGpydm44a2g=",
                  index: true,
                },
              ],
            },
            {
              type: "execute",
              attributes: [
                {
                  key: "X2NvbnRyYWN0X2FkZHJlc3M=",
                  value:
                    "d29ybWhvbGUxNGhqMnRhdnE4ZnBlc2R3eHhjdTQ0cnR5M2hoOTB2aHVqcnZjbXN0bDR6cjN0eG1mdnc5c3JyZzQ2NQ==",
                  index: true,
                },
              ],
            },
            {
              type: "wasm",
              attributes: [
                {
                  key: "X2NvbnRyYWN0X2FkZHJlc3M=",
                  value:
                    "d29ybWhvbGUxNGhqMnRhdnE4ZnBlc2R3eHhjdTQ0cnR5M2hoOTB2aHVqcnZjbXN0bDR6cjN0eG1mdnc5c3JyZzQ2NQ==",
                  index: true,
                },
                { key: "YWN0aW9u", value: "c3VibWl0X29ic2VydmF0aW9ucw==", index: true },
                {
                  key: "b3duZXI=",
                  value: "d29ybWhvbGUxNXpkYWFuOHM3bHQweDJ3anR3a2x1ejAwcHRwbHVrcGpydm44a2g=",
                  index: true,
                },
              ],
            },
          ],
          codespace: "",
        },
        tx: "CrYICrMICiQvY29zbXdhc20ud2FzbS52MS5Nc2dFeGVjdXRlQ29udHJhY3QSiggKL3dvcm1ob2xlMTV6ZGFhbjhzN2x0MHgyd2p0d2tsdXowMHB0cGx1a3BqcnZuOGtoEkN3b3JtaG9sZTE0aGoydGF2cThmcGVzZHd4eGN1NDRydHkzaGg5MHZodWpydmNtc3RsNHpyM3R4bWZ2dzlzcnJnNDY1GpEHeyJzdWJtaXRfb2JzZXJ2YXRpb25zIjp7Im9ic2VydmF0aW9ucyI6Ilczc2lkSGhmYUdGemFDSTZJamRXVUM5b1FtazNZalJ4U0ZoQlIxZFNWSGxwUTBKeGVqRkVWVlJzZEVjM01GUnRXbFJQUWxsV2NGazlJaXdpZEdsdFpYTjBZVzF3SWpveE56RTFOelV4TXpjeExDSnViMjVqWlNJNk9ESXlOU3dpWlcxcGRIUmxjbDlqYUdGcGJpSTZNU3dpWlcxcGRIUmxjbDloWkdSeVpYTnpJam9pWldNM016Y3lPVGsxWkRWall6ZzNNekl6T1RkbVlqQmhaRE0xWXpBeE1qRmxNR1ZoWVRrd1pESTJaamd5T0dFMU16UmpZV0kxTkRNNU1XSXpZVFJtTlNJc0luTmxjWFZsYm1ObElqbzROekkyTURnc0ltTnZibk5wYzNSbGJtTjVYMnhsZG1Wc0lqb3pNaXdpY0dGNWJHOWhaQ0k2SWtGUlFVRkJRVUZCUVVGQlFVRkJRVUZCUVVGQlFVRkJRVUZCUVVGQlFVRkJRVUZCUVdoamJWaERWSGdyUVVGQlFVRkJRVUZCUVVGQlFVRkJRV3huYlRGUlQxaGxNMlJ6VldWeWRqVm5VM0psUW5KSWJVZDVkMEZCWjBGQlFVRkJRVUZCUVVGQlFVRkJRVWRYYnpoSWRscHhSbTFQUnpGMGMwTnZhakJrTlRJNFFqTmFNVUZCU1VGQlFVRkJRVUZCUVVGQlFVRkJRVUZCUVVGQlFVRkJRVUZCUVVGQlFVRkJRVUZCUVVGQlFVRkJRVUU5UFNKOVhRPT0iLCJndWFyZGlhbl9zZXRfaW5kZXgiOjQsInNpZ25hdHVyZSI6eyJpbmRleCI6MCwic2lnbmF0dXJlIjpbMTE4LDI0LDIyMiwxMDcsMjE0LDE4OCwxOTUsMTg1LDYwLDEyMywyMDcsMjA4LDk2LDc5LDE0NSwxNjksNjUsMjAyLDExMyw1MSw0NSw4MiwyOCw1MCwxMDIsMTYsMTcsMTQ2LDIyNSwxNjMsMjAyLDQxLDg3LDI1MCwyMTYsNjgsNTYsMjYsMTYwLDMxLDgwLDgyLDIyMCw3MCw2NCwxNjgsMjU0LDEwMCwzOCw5Nyw1OSwyMzUsMTg0LDEyNiwyMDgsMTYsMjIxLDcyLDEyNSw5Myw5OCwxOTcsMTUyLDE4MSwwXX19fRJaClIKRgofL2Nvc21vcy5jcnlwdG8uc2VjcDI1NmsxLlB1YktleRIjCiECTNU10MWVzKLoEbR3KVeQzNN0RcrBOuz+X/R+8hcjr00SBAoCCAEYhtcEEgQQgIl6GkC6wWnfEe2JArWPIpcypfQ+AhCamp6n+hga87jh07agcAJVuCXS3EgxAc0xdb1y+2TMuapNPwjVDyKctycFVtGn",
      },
    });
};

const givenTwoTransaction = () => {
  nock(rpc)
    .post("/tx?hash=0x54A03027F91EC0EB8AF4C5754C69730AC180524BC8ECCD5595B78845D36B06DE")
    .reply(200, {
      jsonrpc: "2.0",
      id: -1,
      result: {
        hash: "54A03027F91EC0EB8AF4C5754C69730AC180524BC8ECCD5595B78845D36B06DE",
        height: "8419205",
        index: 0,
        tx_result: {
          code: 0,
          data: "Cs4BCiQvY29zbXdhc20ud2FzbS52MS5Nc2dFeGVjdXRlQ29udHJhY3QSpQEKogFbeyJrZXkiOnsiZW1pdHRlcl9jaGFpbiI6NCwiZW1pdHRlcl9hZGRyZXNzIjoiMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwYjZmNmQ4NmE4Zjk4NzlhOWM4N2Y2NDM3NjhkOWVmYzM4YzFkYTZlNyIsInNlcXVlbmNlIjo1NTAzMzJ9LCJzdGF0dXMiOnsidHlwZSI6ImNvbW1pdHRlZCJ9fV0=",
          log: '[{"events":[{"type":"execute","attributes":[{"key":"_contract_address","value":"wormhole14hj2tavq8fpesdwxxcu44rty3hh90vhujrvcmstl4zr3txmfvw9srrg465"}]},{"type":"message","attributes":[{"key":"action","value":"/cosmwasm.wasm.v1.MsgExecuteContract"},{"key":"module","value":"wasm"},{"key":"sender","value":"wormhole1rmermx6td6ppr7x23y8ma7564nauzwm7nuk9e0"}]},{"type":"wasm","attributes":[{"key":"_contract_address","value":"wormhole14hj2tavq8fpesdwxxcu44rty3hh90vhujrvcmstl4zr3txmfvw9srrg465"},{"key":"action","value":"submit_observations"},{"key":"owner","value":"wormhole1rmermx6td6ppr7x23y8ma7564nauzwm7nuk9e0"}]}]}]',
          info: "",
          gas_wanted: "2000000",
          gas_used: "136660",
          events: [
            {
              type: "tx",
              attributes: [
                { key: "ZmVl", value: null, index: true },
                {
                  key: "ZmVlX3BheWVy",
                  value: "d29ybWhvbGUxcm1lcm14NnRkNnBwcjd4MjN5OG1hNzU2NG5hdXp3bTdudWs5ZTA=",
                  index: true,
                },
              ],
            },
            {
              type: "tx",
              attributes: [
                {
                  key: "YWNjX3NlcQ==",
                  value:
                    "d29ybWhvbGUxcm1lcm14NnRkNnBwcjd4MjN5OG1hNzU2NG5hdXp3bTdudWs5ZTAvMjE0NjE3Mw==",
                  index: true,
                },
              ],
            },
            {
              type: "tx",
              attributes: [
                {
                  key: "c2lnbmF0dXJl",
                  value:
                    "cURCOXpvQ3RvQy9YbUU0WDhNcENLdUc5NHJGYXFHcVUwYmlBK1Q4Q0NSTklnVXo2RlBvWkc2VE9FVW5Odk0rU2lla09ZRHN5WlJGZzA2MkFUUXJvL2c9PQ==",
                  index: true,
                },
              ],
            },
            {
              type: "message",
              attributes: [
                {
                  key: "YWN0aW9u",
                  value: "L2Nvc213YXNtLndhc20udjEuTXNnRXhlY3V0ZUNvbnRyYWN0",
                  index: true,
                },
              ],
            },
            {
              type: "message",
              attributes: [
                { key: "bW9kdWxl", value: "d2FzbQ==", index: true },
                {
                  key: "c2VuZGVy",
                  value: "d29ybWhvbGUxcm1lcm14NnRkNnBwcjd4MjN5OG1hNzU2NG5hdXp3bTdudWs5ZTA=",
                  index: true,
                },
              ],
            },
            {
              type: "execute",
              attributes: [
                {
                  key: "X2NvbnRyYWN0X2FkZHJlc3M=",
                  value:
                    "d29ybWhvbGUxNGhqMnRhdnE4ZnBlc2R3eHhjdTQ0cnR5M2hoOTB2aHVqcnZjbXN0bDR6cjN0eG1mdnc5c3JyZzQ2NQ==",
                  index: true,
                },
              ],
            },
            {
              type: "wasm",
              attributes: [
                {
                  key: "X2NvbnRyYWN0X2FkZHJlc3M=",
                  value:
                    "d29ybWhvbGUxNGhqMnRhdnE4ZnBlc2R3eHhjdTQ0cnR5M2hoOTB2aHVqcnZjbXN0bDR6cjN0eG1mdnc5c3JyZzQ2NQ==",
                  index: true,
                },
                { key: "YWN0aW9u", value: "c3VibWl0X29ic2VydmF0aW9ucw==", index: true },
                {
                  key: "b3duZXI=",
                  value: "d29ybWhvbGUxcm1lcm14NnRkNnBwcjd4MjN5OG1hNzU2NG5hdXp3bTdudWs5ZTA=",
                  index: true,
                },
              ],
            },
          ],
          codespace: "",
        },
        tx: "CrYICrMICiQvY29zbXdhc20ud2FzbS52MS5Nc2dFeGVjdXRlQ29udHJhY3QSiggKL3dvcm1ob2xlMXJtZXJteDZ0ZDZwcHI3eDIzeThtYTc1NjRuYXV6d203bnVrOWUwEkN3b3JtaG9sZTE0aGoydGF2cThmcGVzZHd4eGN1NDRydHkzaGg5MHZodWpydmNtc3RsNHpyM3R4bWZ2dzlzcnJnNDY1GpEHeyJzdWJtaXRfb2JzZXJ2YXRpb25zIjp7Im9ic2VydmF0aW9ucyI6Ilczc2lkSGhmYUdGemFDSTZJa1o1WW5wbGRHNTVhVTVRZGpZNVJucEtUR05sTUVoV2JGUlVSV0pTWm5Wa1ZUaDJZVWd6UlRaS04yczlJaXdpZEdsdFpYTjBZVzF3SWpveE56RTFOelV4TlRNMExDSnViMjVqWlNJNk5UWTRORFl4TVRNekxDSmxiV2wwZEdWeVgyTm9ZV2x1SWpvMExDSmxiV2wwZEdWeVgyRmtaSEpsYzNNaU9pSXdNREF3TURBd01EQXdNREF3TURBd01EQXdNREF3TURCaU5tWTJaRGcyWVRobU9UZzNPV0U1WXpnM1pqWTBNemMyT0dRNVpXWmpNemhqTVdSaE5tVTNJaXdpYzJWeGRXVnVZMlVpT2pVMU1ETXpNaXdpWTI5dWMybHpkR1Z1WTNsZmJHVjJaV3dpT2pFMUxDSndZWGxzYjJGa0lqb2lRVkZCUVVGQlFVRkJRVUZCUVVGQlFVRkJRVUZCUVVGQlFVRkJRVUZCUVVGQlFVRkJRVUZUWmpaVVJtUkJRVUZCUVVGQlFVRkJRVUZCUVVGQlZqSTBjamRaT1RkU2RFNUJSbWh0U2tWak16VnBSemswZG5GalFVRm5RVUZCUVVGQlFVRkJRVUZCUVVGQlFYQnpZVlJLT1ZWWVZtODFha05RU0doNlV5OVRjM0pRVGxNdlFVSTBRVUZCUVVGQlFVRkJRVUZCUVVGQlFVRkJRVUZCUVVGQlFVRkJRVUZCUVVGQlFVRkJRVUZCUVVGQlFUMDlJbjFkIiwiZ3VhcmRpYW5fc2V0X2luZGV4Ijo0LCJzaWduYXR1cmUiOnsiaW5kZXgiOjExLCJzaWduYXR1cmUiOls2NywxNDcsMjU1LDIwMiwxMCwxMDUsMjcsOTksMTgwLDIxMywyMjYsNDksNTgsMjM4LDE0OSw0LDIyOSwxOTAsMjQ1LDk0LDY0LDE1LDE1NSwxNTAsOTMsMzUsMjA5LDIsMTA4LDc2LDU4LDksOTAsMTk2LDEwNiw0MSwyMDgsMjE1LDUzLDI0NSw0NSwxMzAsMTE2LDIzMiw4NSw1MCwxMDYsMTI2LDY4LDQ2LDI2LDI0MCwxNTksMTcyLDc4LDkwLDExNywxODksNzQsMjQ4LDk4LDY5LDE2Myw5MCwwXX19fRJbClMKRgofL2Nvc21vcy5jcnlwdG8uc2VjcDI1NmsxLlB1YktleRIjCiED4cB+1EZaSSVNcI6Eu+GodUFQF9R4TyGbo75somWCRFsSBAoCCAEY/f6CARIEEICJehpAqDB9zoCtoC/XmE4X8MpCKuG94rFaqGqU0biA+T8CCRNIgUz6FPoZG6TOEUnNvM+SiekOYDsyZRFg062ATQro/g==",
      },
    });

  nock(rpc)
    .post("/tx?hash=0x726E20A616F114A227F2A815A7122C65418D082AD8544322F1F3EB3704158A71")
    .reply(200, {
      jsonrpc: "2.0",
      id: -1,
      result: {
        hash: "726E20A616F114A227F2A815A7122C65418D082AD8544322F1F3EB3704158A71",
        height: "8419205",
        index: 1,
        tx_result: {
          code: 0,
          data: "Cs4BCiQvY29zbXdhc20ud2FzbS52MS5Nc2dFeGVjdXRlQ29udHJhY3QSpQEKogFbeyJrZXkiOnsiZW1pdHRlcl9jaGFpbiI6NCwiZW1pdHRlcl9hZGRyZXNzIjoiMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwYjZmNmQ4NmE4Zjk4NzlhOWM4N2Y2NDM3NjhkOWVmYzM4YzFkYTZlNyIsInNlcXVlbmNlIjo1NTAzMzJ9LCJzdGF0dXMiOnsidHlwZSI6ImNvbW1pdHRlZCJ9fV0=",
          log: '[{"events":[{"type":"execute","attributes":[{"key":"_contract_address","value":"wormhole14hj2tavq8fpesdwxxcu44rty3hh90vhujrvcmstl4zr3txmfvw9srrg465"}]},{"type":"message","attributes":[{"key":"action","value":"/cosmwasm.wasm.v1.MsgExecuteContract"},{"key":"module","value":"wasm"},{"key":"sender","value":"wormhole1fw4jcyd0awn7702rrxwcx9w74qgpmljckyvdlq"}]},{"type":"wasm","attributes":[{"key":"_contract_address","value":"wormhole14hj2tavq8fpesdwxxcu44rty3hh90vhujrvcmstl4zr3txmfvw9srrg465"},{"key":"action","value":"submit_observations"},{"key":"owner","value":"wormhole1fw4jcyd0awn7702rrxwcx9w74qgpmljckyvdlq"}]}]}]',
          info: "",
          gas_wanted: "2000000",
          gas_used: "136601",
          events: [
            {
              type: "tx",
              attributes: [
                { key: "ZmVl", value: null, index: true },
                {
                  key: "ZmVlX3BheWVy",
                  value: "d29ybWhvbGUxZnc0amN5ZDBhd243NzAycnJ4d2N4OXc3NHFncG1samNreXZkbHE=",
                  index: true,
                },
              ],
            },
            {
              type: "tx",
              attributes: [
                {
                  key: "YWNjX3NlcQ==",
                  value:
                    "d29ybWhvbGUxZnc0amN5ZDBhd243NzAycnJ4d2N4OXc3NHFncG1samNreXZkbHEvMTkxNDU1NQ==",
                  index: true,
                },
              ],
            },
            {
              type: "tx",
              attributes: [
                {
                  key: "c2lnbmF0dXJl",
                  value:
                    "cm52RVZtWTVBVjJaMlNnY3FHVmpQS2dSOEVocGl2T3BGUUVpV0pRaEZiNDJQMTlvVlltVjVnR1hoWnd0NFNQa0FIWnZ1SmxrYWdQYXp0MERYUm8rVVE9PQ==",
                  index: true,
                },
              ],
            },
            {
              type: "message",
              attributes: [
                {
                  key: "YWN0aW9u",
                  value: "L2Nvc213YXNtLndhc20udjEuTXNnRXhlY3V0ZUNvbnRyYWN0",
                  index: true,
                },
              ],
            },
            {
              type: "message",
              attributes: [
                { key: "bW9kdWxl", value: "d2FzbQ==", index: true },
                {
                  key: "c2VuZGVy",
                  value: "d29ybWhvbGUxZnc0amN5ZDBhd243NzAycnJ4d2N4OXc3NHFncG1samNreXZkbHE=",
                  index: true,
                },
              ],
            },
            {
              type: "execute",
              attributes: [
                {
                  key: "X2NvbnRyYWN0X2FkZHJlc3M=",
                  value:
                    "d29ybWhvbGUxNGhqMnRhdnE4ZnBlc2R3eHhjdTQ0cnR5M2hoOTB2aHVqcnZjbXN0bDR6cjN0eG1mdnc5c3JyZzQ2NQ==",
                  index: true,
                },
              ],
            },
            {
              type: "wasm",
              attributes: [
                {
                  key: "X2NvbnRyYWN0X2FkZHJlc3M=",
                  value:
                    "d29ybWhvbGUxNGhqMnRhdnE4ZnBlc2R3eHhjdTQ0cnR5M2hoOTB2aHVqcnZjbXN0bDR6cjN0eG1mdnc5c3JyZzQ2NQ==",
                  index: true,
                },
                { key: "YWN0aW9u", value: "c3VibWl0X29ic2VydmF0aW9ucw==", index: true },
                {
                  key: "b3duZXI=",
                  value: "d29ybWhvbGUxZnc0amN5ZDBhd243NzAycnJ4d2N4OXc3NHFncG1samNreXZkbHE=",
                  index: true,
                },
              ],
            },
          ],
          codespace: "",
        },
        tx: "CrsICrgICiQvY29zbXdhc20ud2FzbS52MS5Nc2dFeGVjdXRlQ29udHJhY3QSjwgKL3dvcm1ob2xlMWZ3NGpjeWQwYXduNzcwMnJyeHdjeDl3NzRxZ3BtbGpja3l2ZGxxEkN3b3JtaG9sZTE0aGoydGF2cThmcGVzZHd4eGN1NDRydHkzaGg5MHZodWpydmNtc3RsNHpyM3R4bWZ2dzlzcnJnNDY1GpYHeyJzdWJtaXRfb2JzZXJ2YXRpb25zIjp7Im9ic2VydmF0aW9ucyI6Ilczc2lkSGhmYUdGemFDSTZJa1o1WW5wbGRHNTVhVTVRZGpZNVJucEtUR05sTUVoV2JGUlVSV0pTWm5Wa1ZUaDJZVWd6UlRaS04yczlJaXdpZEdsdFpYTjBZVzF3SWpveE56RTFOelV4TlRNMExDSnViMjVqWlNJNk5UWTRORFl4TVRNekxDSmxiV2wwZEdWeVgyTm9ZV2x1SWpvMExDSmxiV2wwZEdWeVgyRmtaSEpsYzNNaU9pSXdNREF3TURBd01EQXdNREF3TURBd01EQXdNREF3TURCaU5tWTJaRGcyWVRobU9UZzNPV0U1WXpnM1pqWTBNemMyT0dRNVpXWmpNemhqTVdSaE5tVTNJaXdpYzJWeGRXVnVZMlVpT2pVMU1ETXpNaXdpWTI5dWMybHpkR1Z1WTNsZmJHVjJaV3dpT2pFMUxDSndZWGxzYjJGa0lqb2lRVkZCUVVGQlFVRkJRVUZCUVVGQlFVRkJRVUZCUVVGQlFVRkJRVUZCUVVGQlFVRkJRVUZUWmpaVVJtUkJRVUZCUVVGQlFVRkJRVUZCUVVGQlZqSTBjamRaT1RkU2RFNUJSbWh0U2tWak16VnBSemswZG5GalFVRm5RVUZCUVVGQlFVRkJRVUZCUVVGQlFYQnpZVlJLT1ZWWVZtODFha05RU0doNlV5OVRjM0pRVGxNdlFVSTBRVUZCUVVGQlFVRkJRVUZCUVVGQlFVRkJRVUZCUVVGQlFVRkJRVUZCUVVGQlFVRkJRVUZCUVVGQlFUMDlJbjFkIiwiZ3VhcmRpYW5fc2V0X2luZGV4Ijo0LCJzaWduYXR1cmUiOnsiaW5kZXgiOjE2LCJzaWduYXR1cmUiOls1NCw5OCwxOTcsMTQyLDEyMSwxNTQsMTI4LDIsMTQ2LDExLDEzNSwxMDMsMTIxLDk1LDE4NSwxOTUsODcsMjAwLDExNCwyMjEsMjIsNCwyMzIsMTQsNCwyMTQsMTUyLDEyNiwxNjMsMjUyLDEyMCwxNzMsMTExLDI0Nyw5NiwyNyw1MSw1NCwxMyw3MSwyMjYsMTQyLDY5LDExLDc0LDc4LDM5LDIyNywzNyw3MSw1Miw2NiwyMjUsMjA4LDIxMSwxNzEsMjA1LDIyNyw0OSwxNzksMTM3LDE5MywxNjQsMTA4LDFdfX19EloKUgpGCh8vY29zbW9zLmNyeXB0by5zZWNwMjU2azEuUHViS2V5EiMKIQPnPs02nEn7crSxHqFZ7k3b8rPU0hWuOjTvlwrU/UIvwRIECgIIARi77XQSBBCAiXoaQK57xFZmOQFdmdkoHKhlYzyoEfBIaYrzqRUBIliUIRW+Nj9faFWJleYBl4WcLeEj5AB2b7iZZGoD2s7dA10aPlE=",
      },
    });
};
