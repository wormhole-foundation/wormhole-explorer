import { seiRedeemedTransactionFoundMapper } from "../../../../src/infrastructure/mappers/sei/seiRedeemedTransactionFoundMapper";
import { describe, it, expect } from "@jest/globals";
import { WormchainBlockLogs } from "../../../../src/domain/entities/wormchain";

describe("seiRedeemedTransactionFoundMapper", () => {
  it("should be able to map log to seiRedeemedTransactionFoundMapper", async () => {
    // When
    const result = seiRedeemedTransactionFoundMapper([""], log) as any;

    // Then
    expect(result[0].name).toBe("transfer-redeemed");
    expect(result[0].chainId).toBe(32);
    expect(result[0].txHash).toBe(
      "0x0xa0f8d5e40d933fc8a33f2c529152cdba9d44703c4bae3c382c6e2666469640fd"
    );
    expect(result[0].address).toBe(
      "sei189adguawugk3e55zn63z8r9ll29xrjwca636ra7v7gxuzn98sxyqwzt47l"
    );
    expect(result[0].attributes.emitterAddress).toBe(
      "ccceeb29348f71bdd22ffef43a2a19c1f5b5e17c5cca5411529120182672ade5"
    );
    expect(result[0].attributes.sequence).toBe(133660);
    expect(result[0].attributes.protocol).toBe("Token Bridge");
    expect(result[0].attributes.emitterChain).toBe(21);
  });

  const log: WormchainBlockLogs = {
    transactions: [
      {
        attributes: [
          {
            key: "X2NvbnRyYWN0X2FkZHJlc3M=",
            value:
              "c2VpMTg5YWRndWF3dWdrM2U1NXpuNjN6OHI5bGwyOXhyandjYTYzNnJhN3Y3Z3h1em45OHN4eXF3enQ0N2w=",
            index: true,
          },
          { key: "YWN0aW9u", value: "Y29tcGxldGVfdHJhbnNmZXJfd2l0aF9wYXlsb2Fk", index: true },
          {
            key: "dHJhbnNmZXJfcGF5bG9hZA==",
            value:
              "ZXlKaVlYTnBZMTl5WldOcGNHbGxiblFpT25zaWNtVmphWEJwWlc1MElqb2lZekpXY0UxWVFYZGhNa1o1WWxob01Wa3laSFZQVkdNd1RVZFNNMlJIYjNkT2FrSnpaRzVWZDA1NlNUSlBWMmh5WTI1TmVrNUlTVEVpZlgwPQ==",
            index: true,
          },
          {
            key: "X2NvbnRyYWN0X2FkZHJlc3M=",
            value:
              "c2VpMXNtemxtOXQ3OWt1cjM5Mm51OWVnbDhwOGplOWo5MnE0Z3pndWV3ajU2YTA1a3l4eHJhMHF5MG51ZjM=",
            index: true,
          },
          { key: "YWN0aW9u", value: "Y29tcGxldGVfdHJhbnNmZXJfd3JhcHBlZA==", index: true },
          {
            key: "Y29udHJhY3Q=",
            value:
              "c2VpMWxnOTV2enFrMzUzbXM5YXBwem5oZDZyMzM2c3NjcXJjNTA3NDM5bjc0d3I3cmZkdno3ZHFxYTlzbGw=",
            index: true,
          },
          {
            key: "cmVjaXBpZW50",
            value:
              "c2VpMTg5YWRndWF3dWdrM2U1NXpuNjN6OHI5bGwyOXhyandjYTYzNnJhN3Y3Z3h1em45OHN4eXF3enQ0N2w=",
            index: true,
          },
          { key: "YW1vdW50", value: "MTYwNDkwMzcyNQ==", index: true },
          {
            key: "cmVsYXllcg==",
            value: "c2VpMXAwa2FybXh1Y2duOTc0MGR3dGowNjBsdnUwNzI2OWhrcnMzNHI1",
            index: true,
          },
          { key: "ZmVl", value: "MA==", index: true },
          {
            key: "X2NvbnRyYWN0X2FkZHJlc3M=",
            value:
              "c2VpMWxnOTV2enFrMzUzbXM5YXBwem5oZDZyMzM2c3NjcXJjNTA3NDM5bjc0d3I3cmZkdno3ZHFxYTlzbGw=",
            index: true,
          },
          { key: "YWN0aW9u", value: "bWludA==", index: true },
          {
            key: "dG8=",
            value:
              "c2VpMTg5YWRndWF3dWdrM2U1NXpuNjN6OHI5bGwyOXhyandjYTYzNnJhN3Y3Z3h1em45OHN4eXF3enQ0N2w=",
            index: true,
          },
          { key: "YW1vdW50", value: "MTYwNDkwMzcyNQ==", index: true },
        ],
        height: "81441608",
        hash: "0xa0f8d5e40d933fc8a33f2c529152cdba9d44703c4bae3c382c6e2666469640fd",
        tx: Buffer.from([
          10, 213, 13, 10, 180, 13, 10, 36, 47, 99, 111, 115, 109, 119, 97, 115, 109, 46, 119, 97,
          115, 109, 46, 118, 49, 46, 77, 115, 103, 69, 120, 101, 99, 117, 116, 101, 67, 111, 110,
          116, 114, 97, 99, 116, 18, 139, 13, 10, 42, 115, 101, 105, 49, 112, 48, 107, 97, 114, 109,
          120, 117, 99, 103, 110, 57, 55, 52, 48, 100, 119, 116, 106, 48, 54, 48, 108, 118, 117, 48,
          55, 50, 54, 57, 104, 107, 114, 115, 51, 52, 114, 53, 18, 62, 115, 101, 105, 49, 56, 57,
          97, 100, 103, 117, 97, 119, 117, 103, 107, 51, 101, 53, 53, 122, 110, 54, 51, 122, 56,
          114, 57, 108, 108, 50, 57, 120, 114, 106, 119, 99, 97, 54, 51, 54, 114, 97, 55, 118, 55,
          103, 120, 117, 122, 110, 57, 56, 115, 120, 121, 113, 119, 122, 116, 52, 55, 108, 26, 156,
          12, 123, 34, 99, 111, 109, 112, 108, 101, 116, 101, 95, 116, 114, 97, 110, 115, 102, 101,
          114, 95, 97, 110, 100, 95, 99, 111, 110, 118, 101, 114, 116, 34, 58, 123, 34, 118, 97, 97,
          34, 58, 34, 65, 81, 65, 65, 65, 65, 81, 78, 65, 80, 102, 101, 83, 99, 105, 43, 75, 52, 73,
          107, 89, 47, 86, 79, 65, 52, 83, 114, 86, 97, 86, 70, 118, 104, 110, 98, 98, 90, 51, 115,
          70, 99, 122, 74, 67, 76, 57, 56, 84, 102, 82, 122, 75, 78, 121, 122, 122, 114, 111, 49,
          106, 74, 88, 72, 74, 106, 72, 51, 57, 117, 47, 50, 48, 78, 52, 107, 71, 84, 66, 53, 75,
          75, 117, 70, 86, 116, 117, 107, 116, 97, 74, 79, 77, 104, 48, 66, 65, 101, 85, 56, 87, 52,
          48, 114, 47, 68, 118, 108, 122, 50, 86, 52, 80, 108, 102, 118, 117, 51, 80, 72, 54, 56,
          75, 83, 121, 119, 77, 97, 77, 108, 76, 80, 75, 56, 76, 80, 114, 82, 109, 83, 69, 99, 83,
          102, 100, 86, 70, 119, 86, 56, 69, 122, 98, 121, 98, 112, 109, 89, 121, 71, 107, 69, 117,
          51, 76, 117, 55, 118, 122, 73, 49, 112, 122, 98, 69, 110, 49, 73, 57, 75, 90, 117, 48, 65,
          65, 122, 101, 98, 68, 104, 119, 99, 121, 105, 57, 98, 121, 70, 74, 104, 101, 86, 117, 49,
          109, 117, 83, 99, 114, 83, 47, 119, 43, 101, 83, 73, 68, 47, 67, 97, 55, 111, 104, 119,
          56, 76, 70, 78, 87, 120, 120, 56, 101, 109, 50, 118, 71, 83, 71, 69, 84, 50, 48, 56, 104,
          103, 86, 98, 48, 84, 86, 110, 65, 79, 73, 116, 53, 50, 110, 67, 55, 65, 107, 75, 109, 109,
          55, 74, 108, 104, 89, 66, 66, 67, 114, 66, 90, 69, 89, 79, 101, 67, 121, 43, 75, 67, 66,
          104, 117, 106, 102, 66, 55, 118, 115, 71, 103, 111, 108, 56, 105, 107, 53, 78, 47, 73, 54,
          86, 121, 87, 88, 82, 54, 78, 70, 122, 99, 65, 102, 102, 101, 50, 105, 85, 52, 118, 106,
          70, 115, 120, 122, 72, 43, 116, 75, 84, 57, 83, 118, 79, 121, 78, 74, 103, 50, 43, 104,
          90, 57, 120, 67, 117, 80, 108, 67, 81, 74, 53, 56, 66, 66, 112, 102, 114, 115, 121, 56,
          50, 50, 76, 79, 90, 114, 107, 121, 122, 66, 55, 70, 55, 90, 120, 97, 54, 82, 86, 115, 114,
          66, 108, 77, 121, 56, 90, 103, 52, 53, 87, 79, 108, 86, 122, 70, 111, 80, 99, 77, 99, 112,
          116, 77, 50, 67, 103, 87, 110, 90, 77, 118, 113, 107, 111, 122, 98, 98, 84, 86, 55, 113,
          87, 54, 47, 112, 76, 108, 111, 112, 72, 100, 103, 56, 50, 48, 102, 85, 54, 56, 65, 67,
          100, 88, 70, 90, 82, 113, 73, 98, 70, 80, 99, 99, 72, 87, 71, 88, 56, 107, 56, 70, 109,
          65, 83, 79, 47, 50, 67, 51, 77, 99, 53, 69, 56, 67, 99, 86, 83, 100, 119, 100, 107, 70,
          103, 66, 72, 50, 106, 85, 47, 97, 78, 70, 43, 66, 81, 47, 118, 51, 76, 74, 66, 75, 90, 79,
          80, 121, 104, 118, 88, 88, 104, 43, 72, 68, 102, 48, 119, 67, 104, 83, 77, 68, 100, 55,
          80, 111, 65, 67, 117, 43, 105, 43, 86, 88, 118, 120, 50, 87, 65, 50, 48, 82, 81, 117, 122,
          69, 111, 56, 54, 116, 74, 88, 56, 79, 90, 109, 100, 67, 85, 109, 66, 52, 85, 101, 52, 51,
          78, 122, 54, 120, 67, 90, 81, 88, 109, 43, 55, 99, 82, 86, 84, 111, 74, 49, 70, 118, 105,
          68, 89, 112, 78, 87, 112, 116, 75, 52, 78, 87, 69, 76, 73, 97, 111, 104, 111, 119, 54, 90,
          65, 89, 90, 47, 85, 89, 66, 68, 66, 103, 86, 50, 73, 47, 47, 121, 121, 69, 57, 109, 84,
          117, 56, 76, 112, 111, 112, 55, 80, 97, 56, 116, 88, 110, 68, 83, 106, 53, 80, 86, 108,
          81, 100, 117, 112, 97, 99, 67, 54, 54, 66, 81, 99, 104, 71, 99, 81, 52, 100, 117, 76, 66,
          112, 47, 89, 68, 110, 114, 102, 100, 47, 113, 116, 54, 50, 90, 66, 74, 53, 51, 112, 50,
          71, 80, 72, 89, 97, 89, 100, 70, 76, 84, 85, 73, 65, 68, 87, 79, 48, 85, 76, 103, 116, 77,
          56, 81, 100, 114, 47, 76, 82, 87, 102, 112, 69, 74, 77, 102, 73, 89, 68, 88, 72, 102, 99,
          43, 53, 81, 100, 66, 84, 52, 55, 81, 78, 115, 111, 53, 57, 90, 83, 119, 54, 65, 111, 107,
          103, 111, 98, 104, 89, 73, 57, 113, 109, 73, 89, 79, 116, 99, 83, 79, 47, 119, 52, 54, 82,
          121, 66, 102, 118, 105, 79, 49, 50, 107, 76, 72, 111, 114, 121, 99, 66, 68, 113, 81, 54,
          104, 53, 101, 111, 107, 86, 57, 88, 101, 73, 78, 112, 73, 118, 55, 43, 56, 54, 113, 99,
          55, 100, 121, 74, 70, 86, 43, 81, 75, 98, 119, 67, 84, 48, 85, 72, 88, 106, 83, 108, 97,
          121, 54, 47, 76, 70, 120, 107, 102, 119, 121, 86, 90, 79, 70, 70, 83, 47, 102, 85, 80, 43,
          79, 100, 120, 111, 103, 51, 69, 117, 51, 82, 117, 74, 97, 75, 78, 50, 56, 113, 111, 87,
          77, 65, 68, 57, 119, 107, 104, 112, 53, 102, 84, 73, 56, 66, 88, 75, 85, 119, 48, 118,
          120, 116, 118, 57, 70, 110, 68, 75, 65, 77, 54, 55, 51, 66, 74, 83, 107, 117, 65, 79, 97,
          97, 105, 115, 88, 99, 85, 102, 99, 120, 98, 112, 55, 110, 82, 120, 113, 82, 103, 53, 103,
          115, 121, 103, 108, 80, 110, 78, 55, 122, 110, 53, 86, 117, 107, 89, 49, 118, 74, 86, 67,
          89, 89, 87, 83, 82, 107, 107, 69, 66, 69, 67, 74, 51, 119, 108, 114, 101, 80, 47, 83, 48,
          84, 102, 85, 114, 50, 108, 119, 68, 122, 65, 82, 107, 65, 122, 48, 70, 86, 119, 72, 98,
          76, 56, 72, 119, 110, 70, 70, 65, 72, 49, 116, 82, 86, 86, 65, 75, 116, 49, 104, 104, 66,
          97, 82, 116, 49, 48, 67, 121, 67, 67, 103, 75, 118, 67, 69, 74, 107, 105, 110, 56, 103,
          83, 114, 121, 57, 109, 47, 71, 118, 120, 81, 101, 100, 70, 65, 65, 69, 111, 77, 49, 68,
          77, 85, 69, 73, 112, 84, 55, 103, 104, 110, 79, 57, 86, 65, 49, 100, 99, 85, 75, 78, 120,
          76, 100, 106, 71, 52, 70, 73, 55, 107, 122, 119, 84, 50, 81, 82, 65, 79, 73, 79, 77, 117,
          52, 116, 65, 67, 57, 51, 76, 102, 106, 113, 102, 55, 57, 47, 103, 107, 65, 73, 75, 114,
          76, 79, 89, 71, 98, 78, 97, 48, 71, 76, 86, 85, 52, 90, 117, 87, 97, 79, 115, 115, 65, 90,
          109, 77, 76, 112, 119, 65, 66, 72, 68, 48, 65, 70, 99, 122, 79, 54, 121, 107, 48, 106, 51,
          71, 57, 48, 105, 47, 43, 57, 68, 111, 113, 71, 99, 72, 49, 116, 101, 70, 56, 88, 77, 112,
          85, 69, 86, 75, 82, 73, 66, 103, 109, 99, 113, 51, 108, 65, 65, 65, 65, 65, 65, 65, 67,
          67, 104, 119, 65, 65, 119, 65, 65, 65, 65, 65, 65, 65, 65, 65, 65, 65, 65, 65, 65, 65, 65,
          65, 65, 65, 65, 65, 65, 65, 65, 65, 65, 65, 65, 65, 65, 65, 65, 65, 65, 65, 65, 66, 102,
          113, 79, 77, 116, 65, 65, 65, 65, 65, 65, 65, 65, 65, 65, 65, 65, 65, 65, 65, 65, 111, 76,
          104, 112, 107, 99, 89, 104, 105, 122, 98, 66, 48, 90, 49, 75, 76, 112, 54, 119, 122, 106,
          89, 71, 54, 48, 103, 65, 65, 106, 108, 54, 49, 72, 79, 117, 52, 105, 48, 99, 48, 111, 75,
          101, 111, 105, 79, 77, 118, 47, 113, 75, 89, 99, 110, 89, 55, 113, 79, 104, 57, 56, 122,
          121, 68, 99, 70, 77, 112, 52, 71, 73, 65, 67, 65, 79, 82, 76, 88, 50, 75, 66, 87, 107,
          114, 48, 103, 109, 57, 68, 105, 101, 103, 106, 43, 52, 115, 104, 70, 52, 47, 108, 53, 75,
          81, 109, 101, 82, 100, 90, 82, 111, 119, 111, 68, 119, 57, 72, 115, 105, 89, 109, 70, 122,
          97, 87, 78, 102, 99, 109, 86, 106, 97, 88, 66, 112, 90, 87, 53, 48, 73, 106, 112, 55, 73,
          110, 74, 108, 89, 50, 108, 119, 97, 87, 86, 117, 100, 67, 73, 54, 73, 109, 77, 121, 86,
          110, 66, 78, 87, 69, 70, 51, 89, 84, 74, 71, 101, 87, 74, 89, 97, 68, 70, 90, 77, 109, 82,
          49, 84, 49, 82, 106, 77, 69, 49, 72, 85, 106, 78, 107, 82, 50, 57, 51, 84, 109, 112, 67,
          99, 50, 82, 117, 86, 88, 100, 79, 101, 107, 107, 121, 84, 49, 100, 111, 99, 109, 78, 117,
          84, 88, 112, 79, 83, 69, 107, 120, 73, 110, 49, 57, 34, 125, 125, 18, 28, 87, 111, 114,
          109, 104, 111, 108, 101, 32, 45, 32, 67, 111, 109, 112, 108, 101, 116, 101, 32, 84, 114,
          97, 110, 115, 102, 101, 114, 18, 105, 10, 80, 10, 70, 10, 31, 47, 99, 111, 115, 109, 111,
          115, 46, 99, 114, 121, 112, 116, 111, 46, 115, 101, 99, 112, 50, 53, 54, 107, 49, 46, 80,
          117, 98, 75, 101, 121, 18, 35, 10, 33, 3, 150, 118, 255, 108, 28, 167, 183, 180, 246, 145,
          136, 154, 151, 234, 70, 68, 153, 76, 105, 252, 188, 78, 252, 18, 230, 130, 44, 69, 185,
          122, 217, 250, 18, 4, 10, 2, 8, 1, 24, 29, 18, 21, 10, 14, 10, 4, 117, 115, 101, 105, 18,
          6, 51, 51, 54, 52, 54, 54, 16, 175, 174, 205, 1, 26, 64, 219, 118, 75, 233, 185, 219, 35,
          237, 4, 62, 74, 232, 212, 117, 225, 210, 138, 54, 219, 165, 209, 20, 31, 70, 30, 120, 62,
          200, 233, 132, 212, 51, 111, 201, 25, 184, 43, 65, 52, 181, 242, 13, 32, 197, 112, 80, 21,
          46, 182, 152, 217, 217, 63, 35, 1, 2, 221, 103, 55, 223, 151, 48, 79, 157,
        ]),
      },
    ],
    blockHeight: 81441608n,
    timestamp: 1717767103958,
  };
});
